function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(S(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(C(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(C(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":C(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:T(e)?{[`Set(${e.size})`]:[...e.values()]}:!C(e)||_(e)||N(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,g=t=>d.test(t),v=t=>t.startsWith("onUpdate:"),y=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===R(t),T=t=>"[object Set]"===R(t),I=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,C=t=>null!==t&&"object"==typeof t,k=t=>C(t)&&I(t.then)&&I(t.catch),x=Object.prototype.toString,R=t=>x.call(t),N=t=>"[object Object]"===R(t),D=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L=/-(\w)/g,F=P((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,U=P((t=>t.replace(M,"-$1").toLowerCase())),V=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=P((t=>t?`on${V(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},K=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G=new WeakMap,H=[];let W;const Q=Symbol(""),$=Symbol("");function X(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return t();if(!H.includes(n)){Z(n);try{return et.push(tt),tt=!0,H.push(n),W=n,t()}finally{H.pop(),rt(),W=H[H.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function Y(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===W)return;let r=G.get(t);r||G.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(W)||(i.add(W),W.deps.push(i))}function ot(t,e,n,r,i,o){const s=G.get(t);if(!s)return;const a=new Set,u=t=>{t&&t.forEach((t=>{(t!==W||t.allowRecurse)&&a.add(t)}))};if("clear"===e)s.forEach(u);else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&u(t)}));else switch(void 0!==n&&u(s.get(n)),e){case"add":_(t)?D(n)&&u(s.get("length")):(u(s.get(Q)),E(t)&&u(s.get($)));break;case"delete":_(t)||(u(s.get(Q)),E(t)&&u(s.get($)));break;case"set":E(t)&&u(s.get(Q))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=t("__proto__,__v_isRef,__isVue"),at=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),ut=pt(),ct=pt(!1,!0),lt=pt(!0),ht=ft();function ft(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){const e=Jt(this);for(let n=0,i=this.length;n<i;n++)it(e,0,n+"");const r=n.apply(e,t);return-1===r||!1===r?n.apply(e,t.map(Jt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){nt();const e=n.apply(this,t);return rt(),e}})),t}function pt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Kt:zt:e?Bt:qt).get(n))return n;const o=_(n);if(!t&&o&&w(ht,r))return Reflect.get(ht,r,i);const s=Reflect.get(n,r,i);if(A(r)?at.has(r):st(r))return s;if(t||it(n,0,r),e)return s;if(ee(s)){return!o||!D(r)?s.value:s}return C(s)?t?Wt(s):Ht(s):s}}function dt(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=Jt(r),o=Jt(o),!_(e)&&ee(o)&&!ee(r)))return o.value=r,!0;const s=_(e)&&D(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===Jt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),a}}const gt={get:ut,set:dt(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&at.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,_(t)?"length":Q),Reflect.ownKeys(t)}},vt={get:lt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},yt=y({},gt,{get:ct,set:dt(!0)}),mt=t=>C(t)?Ht(t):t,bt=t=>C(t)?Wt(t):t,wt=t=>t,_t=t=>Reflect.getPrototypeOf(t);function Et(t,e,n=!1,r=!1){const i=Jt(t=t.__v_raw),o=Jt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=_t(i),a=r?wt:n?bt:mt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Tt(t,e=!1){const n=this.__v_raw,r=Jt(n),i=Jt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function It(t,e=!1){return t=t.__v_raw,!e&&it(Jt(t),0,Q),Reflect.get(t,"size",t)}function St(t){t=Jt(t);const e=Jt(this);return _t(e).has.call(e,t)||(e.add(t),ot(e,"add",t,t)),this}function At(t,e){e=Jt(e);const n=Jt(this),{has:r,get:i}=_t(n);let o=r.call(n,t);o||(t=Jt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function Ct(t){const e=Jt(this),{has:n,get:r}=_t(e);let i=n.call(e,t);i||(t=Jt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function kt(){const t=Jt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function xt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Jt(o),a=e?wt:t?bt:mt;return!t&&it(s,0,Q),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Rt(t,e,n){return function(...r){const i=this.__v_raw,o=Jt(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?wt:e?bt:mt;return!e&&it(o,0,u?$:Q),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Nt(t){return function(...e){return"delete"!==t&&this}}function Dt(){const t={get(t){return Et(this,t)},get size(){return It(this)},has:Tt,add:St,set:At,delete:Ct,clear:kt,forEach:xt(!1,!1)},e={get(t){return Et(this,t,!1,!0)},get size(){return It(this)},has:Tt,add:St,set:At,delete:Ct,clear:kt,forEach:xt(!1,!0)},n={get(t){return Et(this,t,!0)},get size(){return It(this,!0)},has(t){return Tt.call(this,t,!0)},add:Nt("add"),set:Nt("set"),delete:Nt("delete"),clear:Nt("clear"),forEach:xt(!0,!1)},r={get(t){return Et(this,t,!0,!0)},get size(){return It(this,!0)},has(t){return Tt.call(this,t,!0)},add:Nt("add"),set:Nt("set"),delete:Nt("delete"),clear:Nt("clear"),forEach:xt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Rt(i,!1,!1),n[i]=Rt(i,!0,!1),e[i]=Rt(i,!1,!0),r[i]=Rt(i,!0,!0)})),[t,n,e,r]}const[Ot,Pt,Lt,Ft]=Dt();function Mt(t,e){const n=e?t?Ft:Lt:t?Pt:Ot;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Ut={get:Mt(!1,!1)},Vt={get:Mt(!1,!0)},jt={get:Mt(!0,!1)},qt=new WeakMap,Bt=new WeakMap,zt=new WeakMap,Kt=new WeakMap;function Gt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>R(t).slice(8,-1))(t))}function Ht(t){return t&&t.__v_isReadonly?t:Qt(t,!1,gt,Ut,qt)}function Wt(t){return Qt(t,!0,vt,jt,zt)}function Qt(t,e,n,r,i){if(!C(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Gt(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function $t(t){return Xt(t)?$t(t.__v_raw):!(!t||!t.__v_isReactive)}function Xt(t){return!(!t||!t.__v_isReadonly)}function Yt(t){return $t(t)||Xt(t)}function Jt(t){return t&&Jt(t.__v_raw)||t}function Zt(t){return z(t,"__v_skip",!0),t}const te=t=>C(t)?Ht(t):t;function ee(t){return Boolean(t&&!0===t.__v_isRef)}function ne(t){return ie(t)}class re{constructor(t,e){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:te(t)}get value(){return it(Jt(this),0,"value"),this._value}set value(t){q(Jt(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:te(t),ot(Jt(this),"set","value",t))}}function ie(t,e=!1){return ee(t)?t:new re(t,e)}function oe(t){return ee(t)?t.value:t}const se={get:(t,e,n)=>oe(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ee(i)&&!ee(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function ae(t){return $t(t)?t:new Proxy(t,se)}class ue{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=X(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Jt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){const t=Jt(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),it(t,0,"value"),t._value}set value(t){this._setter(t)}}function ce(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){he(o,e,n)}return i}function le(t,e,n,r){if(I(t)){const i=ce(t,e,n,r);return i&&k(i)&&i.catch((t=>{he(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(le(t[o],e,n,r));return i}function he(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void ce(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let fe=!1,pe=!1;const de=[];let ge=0;const ve=[];let ye=null,me=0;const be=[];let we=null,_e=0;const Ee=Promise.resolve();let Te=null,Ie=null;function Se(t){const e=Te||Ee;return t?e.then(this?t.bind(this):t):e}function Ae(t){if(!(de.length&&de.includes(t,fe&&t.allowRecurse?ge+1:ge)||t===Ie)){const e=function(t){let e=ge+1,n=de.length;const r=Ne(t);for(;e<n;){const t=e+n>>>1;Ne(de[t])<r?e=t+1:n=t}return e}(t);e>-1?de.splice(e,0,t):de.push(t),Ce()}}function Ce(){fe||pe||(pe=!0,Te=Ee.then(De))}function ke(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Ce()}function xe(t,e=null){if(ve.length){for(Ie=e,ye=[...new Set(ve)],ve.length=0,me=0;me<ye.length;me++)ye[me]();ye=null,me=0,Ie=null,xe(t,e)}}function Re(t){if(be.length){const t=[...new Set(be)];if(be.length=0,we)return void we.push(...t);for(we=t,we.sort(((t,e)=>Ne(t)-Ne(e))),_e=0;_e<we.length;_e++)we[_e]();we=null,_e=0}}const Ne=t=>null==t.id?1/0:t.id;function De(t){pe=!1,fe=!0,xe(t),de.sort(((t,e)=>Ne(t)-Ne(e)));try{for(ge=0;ge<de.length;ge++){const t=de[ge];t&&!1!==t.active&&ce(t,null,14)}}finally{ge=0,de.length=0,Re(),fe=!1,Te=null,(de.length||ve.length||be.length)&&De(t)}}function Oe(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(K))}let a,u=r[a=j(e)]||r[a=j(F(e))];!u&&o&&(u=r[a=j(U(e))]),u&&le(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,le(c,t,6,i)}}function Pe(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!I(t)){const r=t=>{const n=Pe(t,e,!0);n&&(a=!0,y(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):y(s,o),r.set(t,s),s):(r.set(t,null),null)}function Le(t,e){return!(!t||!g(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,U(e))||w(t,e))}let Fe=null,Me=null;function Ue(t){const e=Fe;return Fe=t,Me=t&&t.type.__scopeId||null,e}function Ve(t,e=Fe,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&br(-1);const i=Ue(e),o=t(...n);return Ue(i),r._d&&br(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function je(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:g}=t;let y;const m=Ue(t);try{let t;if(4&n.shapeFlag){const e=i||r;y=Rr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,y=Rr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:qe(u)}let m=y;if(t&&!1!==g){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(s&&e.some(v)&&(t=Be(t,s)),m=Cr(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),y=m}catch(b){gr.length=0,he(b,t,1),y=Ar(pr)}return Ue(m),y}const qe=t=>{let e;for(const n in t)("class"===n||"style"===n||g(n))&&((e||(e={}))[n]=t[n]);return e},Be=(t,e)=>{const n={};for(const r in t)v(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function ze(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Le(n,o))return!0}return!1}function Ke(t,e){if(jr){let n=jr.provides;const r=jr.parent&&jr.parent.provides;r===n&&(n=jr.provides=Object.create(r)),n[t]=e}else;}function Ge(t,e,n=!1){const r=jr||Fe;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&I(e)?e.call(r.proxy):e}}function He(t,e){return $e(t,null,e)}const We={};function Qe(t,e,n){return $e(t,e,n)}function $e(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,a=jr){let u,c,h=!1,p=!1;if(ee(t)?(u=()=>t.value,h=!!t._shallow):$t(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some($t),u=()=>t.map((t=>ee(t)?t.value:$t(t)?Je(t):I(t)?ce(t,a,2):void 0))):u=I(t)?e?()=>ce(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),le(t,a,3,[d])}:f,e&&r){const t=u;u=()=>Je(t())}let d=t=>{c=b.options.onStop=()=>{ce(t,a,4)}},g=p?[]:We;const v=()=>{if(b.active)if(e){const t=b();(r||h||(p?t.some(((t,e)=>q(t,g[e]))):q(t,g)))&&(c&&c(),le(e,a,3,[t,g===We?void 0:g,d]),g=t)}else b()};let y;v.allowRecurse=!!e,y="sync"===i?v:"post"===i?()=>rr(v,a&&a.suspense):()=>{!a||a.isMounted?function(t){ke(t,ye,ve,me)}(v):v()};const b=X(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:y});return Qr(b,a),e?n?v():g=b():"post"===i?rr(b,a&&a.suspense):b(),()=>{Y(b),a&&m(a.effects,b)}}function Xe(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?Ye(r,t):()=>r[t]:t.bind(r,r);let o;return I(e)?o=e:(o=e.handler,n=e),$e(i,o.bind(r),n,this)}function Ye(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Je(t,e=new Set){if(!C(t)||e.has(t)||t.__v_skip)return t;if(e.add(t),ee(t))Je(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)Je(t[n],e);else if(T(t)||E(t))t.forEach((t=>{Je(t,e)}));else if(N(t))for(const n in t)Je(t[n],e);return t}function Ze(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bn((()=>{t.isMounted=!0})),En((()=>{t.isUnmounting=!0})),t}const tn=[Function,Array],en={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tn,onEnter:tn,onAfterEnter:tn,onEnterCancelled:tn,onBeforeLeave:tn,onLeave:tn,onAfterLeave:tn,onLeaveCancelled:tn,onBeforeAppear:tn,onAppear:tn,onAfterAppear:tn,onAppearCancelled:tn},setup(t,{slots:e}){const n=qr(),r=Ze();let i;return()=>{const o=e.default&&un(e.default(),!0);if(!o||!o.length)return;const s=Jt(t),{mode:a}=s,u=o[0];if(r.isLeaving)return on(u);const c=sn(u);if(!c)return on(u);const l=rn(c,s,r,n);an(c,l);const h=n.subTree,f=h&&sn(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==pr&&(!Er(c,f)||p)){const t=rn(f,s,r,n);if(an(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},on(u);"in-out"===a&&c.type!==pr&&(t.delayLeave=(t,e,n)=>{nn(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function nn(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function rn(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:m}=e,b=String(t.key),w=nn(n,t),_=(t,e)=>{t&&le(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=g||a}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&Er(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=v||u,r=y||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>rn(t,e,n,r)};return E}function on(t){if(hn(t))return(t=Cr(t)).children=null,t}function sn(t){return hn(t)?t.children?t.children[0]:void 0:t}function an(t,e){6&t.shapeFlag&&t.component?an(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function un(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===hr?(128&o.patchFlag&&r++,n=n.concat(un(o.children,e))):(e||o.type!==pr)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function cn(t){return I(t)?{setup:t,name:t.name}:t}const ln=t=>!!t.type.__asyncLoader,hn=t=>t.type.__isKeepAlive;function fn(t,e){dn(t,"a",e)}function pn(t,e){dn(t,"da",e)}function dn(t,e,n=jr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(vn(e,r,n),n){let t=n.parent;for(;t&&t.parent;)hn(t.parent.vnode)&&gn(r,e,n,t),t=t.parent}}function gn(t,e,n,r){const i=vn(e,t,r,!0);Tn((()=>{m(r[e],i)}),n)}function vn(t,e,n=jr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Br(n);const i=le(e,n,t,r);return Br(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const yn=t=>(e,n=jr)=>(!Kr||"sp"===t)&&vn(t,e,n),mn=yn("bm"),bn=yn("m"),wn=yn("bu"),_n=yn("u"),En=yn("bum"),Tn=yn("um"),In=yn("sp"),Sn=yn("rtg"),An=yn("rtc");function Cn(t,e=jr){vn("ec",t,e)}let kn=!0;function xn(t){const e=Dn(t),n=t.proxy,r=t.ctx;kn=!1,e.beforeCreate&&Rn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:g,activated:v,deactivated:y,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:E,render:T,renderTracked:S,renderTriggered:A,errorCaptured:k,serverPrefetch:x,expose:R,inheritAttrs:N,components:D,directives:O,filters:P}=e;if(c&&function(t,e,n=f){_(t)&&(t=Fn(t));for(const r in t){const n=t[r];C(n)?e[r]="default"in n?Ge(n.from||r,n.default,!0):Ge(n.from||r):e[r]=Ge(n)}}(c,r,null),s)for(const f in s){const t=s[f];I(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);C(e)&&(t.data=Ht(e))}if(kn=!0,o)for(const _ in o){const t=o[_],e=Xr({get:I(t)?t.bind(n,n):I(t.get)?t.get.bind(n,n):f,set:!I(t)&&I(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)Nn(a[f],r,n,f);if(u){const t=I(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Ke(e,t[e])}))}function L(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&Rn(l,t,"c"),L(mn,h),L(bn,p),L(wn,d),L(_n,g),L(fn,v),L(pn,y),L(Cn,k),L(An,S),L(Sn,A),L(En,b),L(Tn,E),L(In,x),_(R))if(R.length){const e=t.exposed||(t.exposed={});R.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===f&&(t.render=T),null!=N&&(t.inheritAttrs=N),D&&(t.components=D),O&&(t.directives=O)}function Rn(t,e,n){le(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Nn(t,e,n,r){const i=r.includes(".")?Ye(n,r):()=>n[r];if(S(t)){const n=e[t];I(n)&&Qe(i,n)}else if(I(t))Qe(i,t.bind(n));else if(C(t))if(_(t))t.forEach((t=>Nn(t,e,n,r)));else{const r=I(t.handler)?t.handler.bind(n):e[t.handler];I(r)&&Qe(i,r,t)}}function Dn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>On(u,t,s,!0))),On(u,e,s)):u=e,o.set(e,u),u}function On(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&On(t,o,n,!0),i&&i.forEach((e=>On(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=Pn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const Pn={data:Ln,props:Un,emits:Un,methods:Un,computed:Un,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,destroyed:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Un,directives:Un,watch:function(t,e){if(!t)return e;if(!e)return t;const n=y(Object.create(null),t);for(const r in e)n[r]=Mn(t[r],e[r]);return n},provide:Ln,inject:function(t,e){return Un(Fn(t),Fn(e))}};function Ln(t,e){return e?t?function(){return y(I(t)?t.call(this,this):t,I(e)?e.call(this,this):e)}:e:t}function Fn(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mn(t,e){return t?[...new Set([].concat(t,e))]:e}function Un(t,e){return t?y(y(Object.create(null),t),e):e}function Vn(t,e,n,r=!1){const i={},o={};z(o,Tr,1),t.propsDefaults=Object.create(null),jn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Qt(i,!1,yt,Vt,Bt):t.type.props?t.props=i:t.props=o,t.attrs=o}function jn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(O(u))continue;const c=e[u];let l;i&&w(i,l=F(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Le(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=Jt(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=qn(i,e,a,r[a],t,!w(r,a))}}return a}function qn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&I(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Br(i),r=o[n]=t.call(null,e),Br(null))}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==U(n)||(r=!0))}return r}function Bn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!I(t)){const r=t=>{u=!0;const[n,r]=Bn(t,e,!0);y(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=F(o[h]);zn(t)&&(s[t]=l)}else if(o)for(const l in o){const t=F(l);if(zn(t)){const e=o[l],n=s[t]=_(e)||I(e)?{type:e}:e;if(n){const e=Hn(Boolean,n.type),r=Hn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function zn(t){return"$"!==t[0]}function Kn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Gn(t,e){return Kn(t)===Kn(e)}function Hn(t,e){return _(e)?e.findIndex((e=>Gn(e,t))):I(e)&&Gn(e,t)?0:-1}const Wn=t=>"_"===t[0]||"$stable"===t,Qn=t=>_(t)?t.map(Rr):[Rr(t)],$n=(t,e,n)=>{const r=Ve((t=>Qn(e(t))),n);return r._c=!1,r},Xn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Wn(i))continue;const n=t[i];if(I(n))e[i]=$n(0,n,r);else if(null!=n){const t=Qn(n);e[i]=()=>t}}},Yn=(t,e)=>{const n=Qn(e);t.slots.default=()=>n};function Jn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(nt(),le(u,n,8,[t.el,a,t,e]),rt())}}function Zn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tr=0;function er(t,e){return function(n,r=null){null==r||C(r)||(r=null);const i=Zn(),o=new Set;let s=!1;const a=i.app={_uid:tr++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Jr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&I(t.install)?(o.add(t),t.install(a,...e)):I(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=Ar(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const nr={scheduler:Ae,allowRecurse:!0},rr=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):ke(t,we,be,_e)},ir=(t,e,n,r,i=!1)=>{if(_(t))return void t.forEach(((t,o)=>ir(t,e&&(_(e)?e[o]:e),n,r,i)));if(ln(r)&&!i)return;const o=4&r.shapeFlag?Wr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):ee(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,rr(t,n)):t()}else if(ee(u)){const t=()=>{u.value=s};s?(t.id=-1,rr(t,n)):t()}else I(u)&&ce(u,a,12,[s,h])};function or(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:c,setElementText:p,parentNode:d,nextSibling:g,setScopeId:v=f,cloneNode:m,insertStaticContent:b}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!1)=>{t&&!Er(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case fr:E(t,e,n,r);break;case pr:T(t,e,n,r);break;case dr:null==t&&I(e,n,r,s);break;case hr:M(t,e,n,r,i,o,s,a,u);break;default:1&h?C(t,e,n,r,i,o,s,a,u):6&h?V(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,ut)}null!=l&&i&&ir(l,t&&t.ref,o,e||t,!e)},E=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},T=(t,e,r,i)=>{null==t?n(e.el=u(e.children||""),r,i):e.el=t.el},I=(t,e,n,r)=>{const i=b(t.children,e,n,r,t.staticCache);t.el||(t.staticCache=i),t.el=i[0],t.anchor=i[i.length-1]},S=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=g(t),n(t,r,i),t=o;n(e,r,i)},A=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=g(t),r(t),t=n;r(e)},C=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?x(e,n,r,i,o,s,a,u):D(t,e,i,o,s,a,u)},x=(t,e,r,o,a,u,c,l)=>{let h,f;const{type:d,props:g,shapeFlag:v,transition:y,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==m&&-1===b)h=t.el=m(t.el);else{if(h=t.el=s(t.type,u,g&&g.is,g),8&v?p(h,t.children):16&v&&N(t.children,h,null,o,a,u&&"foreignObject"!==d,c,l||!!t.dynamicChildren),w&&Jn(t,null,o,"created"),g){for(const e in g)O(e)||i(h,e,null,g[e],u,t.children,o,a,it);(f=g.onVnodeBeforeMount)&&sr(f,o,t)}R(h,t,t.scopeId,c,o)}w&&Jn(t,null,o,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(h),n(h,e,r),((f=g&&g.onVnodeMounted)||_||w)&&rr((()=>{f&&sr(f,o,t),_&&y.enter(h),w&&Jn(t,null,o,"mounted")}),a)},R=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;R(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},N=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?Nr(t[c]):Rr(t[c]);_(null,u,e,n,r,i,o,s,a)}},D=(t,e,n,r,s,a,u)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:d}=e;h|=16&t.patchFlag;const g=t.props||l,v=e.props||l;let y;if((y=v.onVnodeBeforeUpdate)&&sr(y,n,e,t),d&&Jn(e,t,n,"beforeUpdate"),h>0){if(16&h)L(c,e,g,v,n,r,s);else if(2&h&&g.class!==v.class&&i(c,"class",null,v.class,s),4&h&&i(c,"style",g.style,v.style,s),8&h){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const u=a[e],l=g[u],h=v[u];(h!==l||o&&o(c,u))&&i(c,u,l,h,s,t.children,n,r,it)}}1&h&&t.children!==e.children&&p(c,e.children)}else u||null!=f||L(c,e,g,v,n,r,s);const m=s&&"foreignObject"!==e.type;f?P(t.dynamicChildren,f,c,n,r,m,a):u||H(t,e,c,null,n,r,m,a,!1),((y=v.onVnodeUpdated)||d)&&rr((()=>{y&&sr(y,n,e,t),d&&Jn(e,t,n,"updated")}),r)},P=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===hr||!Er(u,c)||6&u.shapeFlag||64&u.shapeFlag)?d(u.el):n;_(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,s,a,u)=>{if(n!==r){for(const c in r){if(O(c))continue;const l=r[c],h=n[c];(l!==h||o&&o(t,c))&&i(t,c,h,l,u,e.children,s,a,it)}if(n!==l)for(const o in n)O(o)||o in r||i(t,o,n[o],null,u,e.children,s,a,it)}},M=(t,e,r,i,o,s,u,c,l)=>{const h=e.el=t?t.el:a(""),f=e.anchor=t?t.anchor:a("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:g}=e;d&&(l=!0),g&&(c=c?c.concat(g):g),null==t?(n(h,r,i),n(f,r,i),N(e.children,r,f,o,s,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(P(t.dynamicChildren,d,r,o,s,u,c),(null!=e.key||o&&e===o.subTree)&&ar(t,e,!0)):H(t,e,r,f,o,s,u,c,l)},V=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):j(e,n,r,i,o,s,u):q(t,e,u)},j=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Ur,o={uid:Vr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bn(r,i),emitsOptions:Pe(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Oe.bind(null,o),o}(t,r,i);if(hn(t)&&(a.ctx.renderer=ut),function(t,e=!1){Kr=e;const{props:n,children:r}=t.vnode,i=zr(t);Vn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=Jt(e),z(e,"_",n)):Xn(e,t.slots={})}else t.slots={},e&&Yn(t,e);z(t.slots,Tr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zt(new Proxy(t.ctx,Fr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;jr=t,nt();const i=ce(r,t,0,[t.props,n]);if(rt(),jr=null,k(i)){const n=()=>{jr=null};if(i.then(n,n),e)return i.then((e=>{Gr(t,e)})).catch((e=>{he(e,t,0)}));t.asyncDep=i}else Gr(t,i)}else Hr(t)}(t,e):void 0;Kr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,K),!t.el){const t=a.subTree=Ar(pr);T(null,t,e,n)}}else K(a,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||ze(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?ze(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Le(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void G(r,e,n);r.next=e,function(t){const e=de.indexOf(t);e>ge&&de.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},K=(t,e,n,r,i,o,s)=>{t.update=X((function(){if(t.isMounted){let e,{next:n,bu:r,u:a,parent:u,vnode:c}=t,l=n;n?(n.el=c.el,G(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&sr(e,u,n,c);const h=je(t),f=t.subTree;t.subTree=h,_(f,h,d(f.el),st(f),t,i,o),n.el=h.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,h.el),a&&rr(a,i),(e=n.props&&n.props.onVnodeUpdated)&&rr((()=>sr(e,u,n,c)),i)}else{let s;const{el:a,props:u}=e,{bm:c,m:l,parent:h}=t;if(c&&B(c),(s=u&&u.onVnodeBeforeMount)&&sr(s,h,e),a&&lt){const n=()=>{t.subTree=je(t),lt(a,t.subTree,t,i,null)};ln(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=je(t);_(null,s,n,r,t,i,o),e.el=s.el}if(l&&rr(l,i),s=u&&u.onVnodeMounted){const t=e;rr((()=>sr(s,h,t)),i)}256&e.shapeFlag&&t.a&&rr(t.a,i),t.isMounted=!0,e=n=r=null}}),nr)},G=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=Jt(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;jn(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=U(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=qn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=F(s);i[e]=qn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&ot(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(y(i,e),n||1!==t||delete i._):(o=!e.$stable,Xn(e,i)),s=e}else e&&(Yn(t,e),s={default:1});if(o)for(const a in i)Wn(a)||a in s||delete i[a]})(t,e.children,n),nt(),xe(void 0,t.update),rt()},H=(t,e,n,r,i,o,s,a,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:d}=e;if(f>0){if(128&f)return void Q(c,h,n,r,i,o,s,a,u);if(256&f)return void W(c,h,n,r,i,o,s,a,u)}8&d?(16&l&&it(c,i,o),h!==c&&p(n,h)):16&l?16&d?Q(c,h,n,r,i,o,s,a,u):it(c,i,o,!0):(8&l&&p(n,""),16&d&&N(h,n,r,i,o,s,a,u))},W=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?Nr(e[p]):Rr(e[p]);_(t[p],r,n,null,i,o,s,a,u)}c>l?it(t,i,o,!0,!1,f):N(e,n,r,i,o,s,a,u,f)},Q=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?Nr(e[c]):Rr(e[c]);if(!Er(r,l))break;_(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?Nr(e[p]):Rr(e[p]);if(!Er(r,c))break;_(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)_(null,e[c]=u?Nr(e[c]):Rr(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)J(t[c],i,o,!0),c++;else{const d=c,g=c,v=new Map;for(c=g;c<=p;c++){const t=e[c]=u?Nr(e[c]):Rr(e[c]);null!=t.key&&v.set(t.key,c)}let y,m=0;const b=p-g+1;let w=!1,E=0;const T=new Array(b);for(c=0;c<b;c++)T[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=b){J(r,i,o,!0);continue}let l;if(null!=r.key)l=v.get(r.key);else for(y=g;y<=p;y++)if(0===T[y-g]&&Er(r,e[y])){l=y;break}void 0===l?J(r,i,o,!0):(T[l-g]=c+1,l>=E?E=l:w=!0,_(r,e[l],n,null,i,o,s,a,u),m++)}const I=w?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(T):h;for(y=I.length-1,c=b-1;c>=0;c--){const t=g+c,h=e[t],f=t+1<l?e[t+1].el:r;0===T[c]?_(null,h,n,f,i,o,s,a,u):w&&(y<0||c!==I[y]?$(h,n,f,2):y--)}}},$=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void $(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,ut);if(a===hr){n(s,e,r);for(let t=0;t<c.length;t++)$(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===dr)return void S(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),rr((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&ir(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&sr(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Jn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,ut,r):c&&(o!==hr||h>0&&64&h)?it(c,e,n,!1,!0):(o===hr&&(128&h||256&h)||!i&&16&l)&&it(u,e,n),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&rr((()=>{d&&sr(d,e,t),p&&Jn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===hr)return void tt(n,i);if(e===dr)return void A(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=g(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=t;if(r&&B(r),i)for(let u=0;u<i.length;u++)Y(i[u]);o&&(Y(o),J(s,t,e,n)),a&&rr(a,e),rr((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():g(t.anchor||t.el),at=(t,e,n)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,n),Re(),e._vnode=t},ut={p:_,um:J,m:$,r:Z,mt:j,mc:N,pc:H,pbc:P,n:st,o:t};let ct,lt;e&&([ct,lt]=e(ut));return{render:at,hydrate:ct,createApp:er(at,ct)}}(t)}function sr(t,e,n,r=null){le(t,e,7,[n,r])}function ar(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=Nr(i[o]),e.el=t.el),n||ar(t,e))}}function ur(t,e){return function(t,e,n=!0,r=!1){const i=Fe||jr;if(i){const n=i.type;if("components"===t){const t=$r(n);if(t&&(t===e||t===F(e)||t===V(F(e))))return n}const o=lr(i[t]||n[t],e)||lr(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const cr=Symbol();function lr(t,e){return t&&(t[e]||t[F(e)]||t[V(F(e))])}const hr=Symbol(void 0),fr=Symbol(void 0),pr=Symbol(void 0),dr=Symbol(void 0),gr=[];let vr=null;function yr(t=!1){gr.push(vr=t?null:[])}let mr=1;function br(t){mr+=t}function wr(t,e,n,r,i){const o=Ar(t,e,n,r,i,!0);return o.dynamicChildren=mr>0?vr||h:null,gr.pop(),vr=gr[gr.length-1]||null,mr>0&&vr&&vr.push(o),o}function _r(t){return!!t&&!0===t.__v_isVNode}function Er(t,e){return t.type===e.type&&t.key===e.key}const Tr="__vInternal",Ir=({key:t})=>null!=t?t:null,Sr=({ref:t})=>null!=t?S(t)||ee(t)||I(t)?{i:Fe,r:t}:t:null,Ar=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==cr||(t=pr);if(_r(t)){const r=Cr(t,e,!0);return n&&Dr(r,n),r}u=t,I(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){(Yt(e)||Tr in e)&&(e=y({},e));let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),C(n)&&(Yt(n)&&!_(n)&&(n=y({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:C(t)?4:I(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ir(e),ref:e&&Sr(e),scopeId:Me,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};Dr(l,n),128&c&&t.normalize(l);mr>0&&!s&&vr&&(i>0||6&c)&&32!==i&&vr.push(l);return l};function Cr(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e=y({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(g(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ir(c),ref:e&&e.ref?n&&o?_(o)?o.concat(Sr(e)):[o,Sr(e)]:Sr(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,staticCache:t.staticCache,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==hr?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Cr(t.ssContent),ssFallback:t.ssFallback&&Cr(t.ssFallback),el:t.el,anchor:t.anchor}}function kr(t=" ",e=0){return Ar(fr,null,t,e)}function xr(t="",e=!1){return e?(yr(),wr(pr,null,t)):Ar(pr,null,t)}function Rr(t){return null==t||"boolean"==typeof t?Ar(pr):_(t)?Ar(hr,null,t.slice()):"object"==typeof t?Nr(t):Ar(fr,null,String(t))}function Nr(t){return null===t.el?t:Cr(t)}function Dr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),Dr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Tr in e?3===r&&Fe&&(1===Fe.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Fe}}else I(e)?(e={default:e,_ctx:Fe},n=32):(e=String(e),64&r?(n=16,e=[kr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Or(t,e){let n;if(_(t)||S(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(C(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const Pr=t=>t?zr(t)?Wr(t)||t.proxy:Pr(t.parent):null,Lr=y(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Pr(t.parent),$root:t=>Pr(t.root),$emit:t=>t.emit,$options:t=>Dn(t),$forceUpdate:t=>()=>Ae(t.update),$nextTick:t=>Se.bind(t.proxy),$watch:t=>Xe.bind(t)}),Fr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];kn&&(s[e]=4)}}const h=Lr[e];let f,p;return h?("$attrs"===e&&it(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(Lr,s)||w(i.config.globalProperties,s)}},Mr=y({},Fr,{get(t,e){if(e!==Symbol.unscopables)return Fr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),Ur=Zn();let Vr=0;let jr=null;const qr=()=>jr||Fe,Br=t=>{jr=t};function zr(t){return 4&t.vnode.shapeFlag}let Kr=!1;function Gr(t,e,n){I(e)?t.render=e:C(e)&&(t.setupState=ae(e)),Hr(t)}function Hr(t,e,n){const r=t.type;t.render||(t.render=r.render||f,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Mr))),jr=t,nt(),xn(t),rt(),jr=null}function Wr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ae(Zt(t.exposed)),{get:(e,n)=>n in e?e[n]:n in Lr?Lr[n](t):void 0}))}function Qr(t,e=jr){e&&(e.effects||(e.effects=[])).push(t)}function $r(t){return I(t)&&t.displayName||t.name}function Xr(t){const e=function(t){let e,n;return I(t)?(e=t,n=f):(e=t.get,n=t.set),new ue(e,n,I(t)||!t.set)}(t);return Qr(e.effect),e}function Yr(t,e,n){const r=arguments.length;return 2===r?C(e)&&!_(e)?_r(e)?Ar(t,null,[e]):Ar(t,e):Ar(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&_r(n)&&(n=[n]),Ar(t,e,n))}const Jr="3.1.4",Zr="http://www.w3.org/2000/svg",ti="undefined"!=typeof document?document:null,ei={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?ti.createElementNS(Zr,t):ti.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>ti.createTextNode(t),createComment:t=>ti.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ti.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,i){if(i){let t,r,o=0,s=i.length;for(;o<s;o++){const a=i[o].cloneNode(!0);0===o&&(t=a),o===s-1&&(r=a),e.insertBefore(a,n)}return[t,r]}const o=n?n.previousSibling:e.lastChild;if(n){let i,o=!1;n instanceof Element?i=n:(o=!0,i=r?ti.createElementNS(Zr,"g"):ti.createElement("div"),e.insertBefore(i,n)),i.insertAdjacentHTML("beforebegin",t),o&&e.removeChild(i)}else e.insertAdjacentHTML("beforeend",t);let s=o?o.nextSibling:e.firstChild;const a=n?n.previousSibling:e.lastChild,u=[];for(;s&&(u.push(s),s!==a);)s=s.nextSibling;return u}};const ni=/\s*!important$/;function ri(t,e,n){if(_(n))n.forEach((n=>ri(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=oi[e];if(n)return n;let r=F(e);if("filter"!==r&&r in t)return oi[e]=r;r=V(r);for(let i=0;i<ii.length;i++){const n=ii[i]+r;if(n in t)return oi[e]=n}return e}(t,e);ni.test(n)?t.setProperty(U(r),n.replace(ni,""),"important"):t[r]=n}}const ii=["Webkit","Moz","ms"],oi={};const si="http://www.w3.org/1999/xlink";let ai=Date.now,ui=!1;if("undefined"!=typeof window){ai()>document.createEvent("Event").timeStamp&&(ai=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);ui=!!(t&&Number(t[1])<=53)}let ci=0;const li=Promise.resolve(),hi=()=>{ci=0};function fi(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(pi.test(t)){let n;for(e={};n=t.match(pi);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[U(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||ai();(ui||r>=n.attached-1)&&le(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>ci||(li.then(hi),ci=ai()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const pi=/(?:Once|Passive|Capture)$/;const di=/^on[a-z]/;const gi=(t,{slots:e})=>Yr(en,wi(t),e);gi.displayName="Transition";const vi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yi=gi.props=y({},en.props,vi),mi=(t,e=[])=>{_(t)?t.forEach((t=>t(...e))):t&&t(...e)},bi=t=>!!t&&(_(t)?t.some((t=>t.length>1)):t.length>1);function wi(t){const e={};for(const y in t)y in vi||(e[y]=t[y]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(C(t))return[_i(t.enter),_i(t.leave)];{const e=_i(t);return[e,e]}}(i),g=d&&d[0],v=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:E,onBeforeAppear:T=m,onAppear:I=b,onAppearCancelled:S=w}=e,A=(t,e,n)=>{Ti(t,e?l:a),Ti(t,e?c:s),n&&n()},k=(t,e)=>{Ti(t,p),Ti(t,f),e&&e()},x=t=>(e,n)=>{const i=t?I:b,s=()=>A(e,t,n);mi(i,[e,s]),Ii((()=>{Ti(e,t?u:o),Ei(e,t?l:a),bi(i)||Ai(e,r,g,s)}))};return y(e,{onBeforeEnter(t){mi(m,[t]),Ei(t,o),Ei(t,s)},onBeforeAppear(t){mi(T,[t]),Ei(t,u),Ei(t,c)},onEnter:x(!1),onAppear:x(!0),onLeave(t,e){const n=()=>k(t,e);Ei(t,h),Ri(),Ei(t,f),Ii((()=>{Ti(t,h),Ei(t,p),bi(_)||Ai(t,r,v,n)})),mi(_,[t,n])},onEnterCancelled(t){A(t,!1),mi(w,[t])},onAppearCancelled(t){A(t,!0),mi(S,[t])},onLeaveCancelled(t){k(t),mi(E,[t])}})}function _i(t){return K(t)}function Ei(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function Ti(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Ii(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Si=0;function Ai(t,e,n,r){const i=t._endId=++Si,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=Ci(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Ci(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=ki(i,o),a=r("animationDelay"),u=r("animationDuration"),c=ki(a,u);let l=null,h=0,f=0;"transition"===e?s>0&&(l="transition",h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?"transition":"animation":null,f=l?"transition"===l?o.length:u.length:0);return{type:l,timeout:h,propCount:f,hasTransform:"transition"===l&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function ki(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>xi(e)+xi(t[n]))))}function xi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ri(){return document.body.offsetHeight}const Ni=new WeakMap,Di=new WeakMap,Oi={name:"TransitionGroup",props:y({},yi,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=qr(),r=Ze();let i,o;return _n((()=>{if(!i.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!function(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))}));n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Ci(r);return i.removeChild(r),o}(i[0].el,n.vnode.el,e))return;i.forEach(Pi),i.forEach(Li);const r=i.filter(Fi);Ri(),r.forEach((t=>{const n=t.el,r=n.style;Ei(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,Ti(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const s=Jt(t),a=wi(s);let u=s.tag||hr;i=o,o=e.default?un(e.default()):[];for(let t=0;t<o.length;t++){const e=o[t];null!=e.key&&an(e,rn(e,a,r,n))}if(i)for(let t=0;t<i.length;t++){const e=i[t];an(e,rn(e,a,r,n)),Ni.set(e,e.el.getBoundingClientRect())}return Ar(u,null,o)}}};function Pi(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function Li(t){Di.set(t,t.el.getBoundingClientRect())}function Fi(t){const e=Ni.get(t),n=Di.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}const Mi=y({patchProp:(t,e,r,i,o=!1,s,a,u,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)ri(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&ri(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:g(e)?v(e)||fi(t,e,0,i,a):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&di.test(e)&&I(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(di.test(e)&&S(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(C_){}}(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i,o){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(si,e.slice(6,e.length)):t.setAttributeNS(si,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},ei);let Ui;const Vi=(...t)=>{const e=(Ui||(Ui=or(Mi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;I(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var ji=function(t,e){return(ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function qi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ji(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bi=function(){return(Bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function zi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(C_){o(C_)}}function a(t){try{u(r.throw(t))}catch(C_){o(C_)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Ki(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(C_){o=[6,C_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Gi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Wi(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function $i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=$i(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xi=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ji(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(C_){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zi=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,to.prototype.create),o}return qi(e,t),e}(Error),to=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?eo(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Zi(i,a,r);return u},t}();function eo(t,e){return t.replace(no,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var no=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function io(t,e){var n=new oo(t,e);return n.subscribe.bind(n)}var oo=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=so),void 0===r.error&&(r.error=so),void 0===r.complete&&(r.complete=so);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(C_){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(C_){"undefined"!=typeof console&&console.error&&console.error(C_)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function so(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){return t&&t._delegate?t._delegate:t}var uo=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),co=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Xi;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(C_){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(C_){if(r)return null;throw C_}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(C_){}try{for(var r=Gi(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Hi(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(C_){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return zi(this,void 0,void 0,(function(){var t;return Ki(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Wi(Wi([],Hi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Hi(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=Gi(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=Hi(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Gi(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lo,ho=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new co(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function fo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var po,go,vo=[];(go=po||(po={}))[go.DEBUG=0]="DEBUG",go[go.VERBOSE=1]="VERBOSE",go[go.INFO=2]="INFO",go[go.WARN=3]="WARN",go[go.ERROR=4]="ERROR",go[go.SILENT=5]="SILENT";var yo,mo={debug:po.DEBUG,verbose:po.VERBOSE,info:po.INFO,warn:po.WARN,error:po.ERROR,silent:po.SILENT},bo=po.INFO,wo=((lo={})[po.DEBUG]="log",lo[po.VERBOSE]="log",lo[po.INFO]="info",lo[po.WARN]="warn",lo[po.ERROR]="error",lo),_o=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=wo[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,fo(["["+i+"]  "+t.name+":"],n))}},Eo=function(){function t(t){this.name=t,this._logLevel=bo,this._logHandler=_o,this._userLogHandler=null,vo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in po))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?mo[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fo([this,po.DEBUG],t)),this._logHandler.apply(this,fo([this,po.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fo([this,po.VERBOSE],t)),this._logHandler.apply(this,fo([this,po.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fo([this,po.INFO],t)),this._logHandler.apply(this,fo([this,po.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fo([this,po.WARN],t)),this._logHandler.apply(this,fo([this,po.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fo([this,po.ERROR],t)),this._logHandler.apply(this,fo([this,po.ERROR],t))},t}();function To(t){vo.forEach((function(e){e.setLogLevel(t)}))}var Io,So=((yo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",yo["bad-app-name"]="Illegal App name: '{$appName}",yo["duplicate-app"]="Firebase App named '{$appName}' already exists",yo["app-deleted"]="Firebase App named '{$appName}' already deleted",yo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",yo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",yo),Ao=new to("app","Firebase",So),Co=((Io={})["@firebase/app"]="fire-core",Io["@firebase/analytics"]="fire-analytics",Io["@firebase/app-check"]="fire-app-check",Io["@firebase/auth"]="fire-auth",Io["@firebase/database"]="fire-rtdb",Io["@firebase/functions"]="fire-fn",Io["@firebase/installations"]="fire-iid",Io["@firebase/messaging"]="fire-fcm",Io["@firebase/performance"]="fire-perf",Io["@firebase/remote-config"]="fire-rc",Io["@firebase/storage"]="fire-gcs",Io["@firebase/firestore"]="fire-fst",Io["fire-js"]="fire-js",Io["firebase-wrapper"]="fire-js-all",Io),ko=new Eo("@firebase/app"),xo=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=$i(void 0,t),this.container=new ho(e.name),this._addComponent(new uo("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(C_){ko.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,C_)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ao.create("app-deleted",{appName:this.name_})},t}();xo.prototype.name&&xo.prototype.options||xo.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ro(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Ao.create("bad-app-name",{appName:String(s)});if(ro(e,s))throw Ao.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Co[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ko.warn(u.join(" "))}o(new uo(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:To,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ao.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=mo[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:po[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=vo;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!ro(e,t=t||"[DEFAULT]"))throw Ao.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return ko.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Ao.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&$i(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function t(){var e=Ro(xo);return e.INTERNAL=Bi(Bi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){$i(e,t)},createSubscribe:io,ErrorFactory:to,deepExtend:$i}),e}(),Do=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ko.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Oo=self.firebase.SDK_VERSION;Oo&&Oo.indexOf("LITE")>=0&&ko.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Po=No.initializeApp;No.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ji()&&ko.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Po.apply(void 0,t)};var Lo,Fo,Mo=No;(Lo=Mo).INTERNAL.registerComponent(new uo("platform-logger",(function(t){return new Do(t)}),"PRIVATE")),Lo.registerVersion("@firebase/app","0.6.28",Fo),Lo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Mo.registerVersion("firebase","8.7.1","app"),Mo.SDK_VERSION="8.7.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Uo=function(t){function e(n,r){var i=t.call(this,Vo(n),"Firebase Storage: "+r+" ("+Vo(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return qi(e,t),e.prototype._codeEquals=function(t){return Vo(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Zi);function Vo(t){return"storage/"+t}function jo(){return new Uo("unknown","An unknown error occurred, please check the error payload for server response.")}function qo(){return new Uo("canceled","User canceled the upload/download.")}function Bo(){return new Uo("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zo(t){return new Uo("invalid-argument",t)}function Ko(){return new Uo("app-deleted","The Firebase app was deleted.")}function Go(t){return new Uo("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ho(t,e){return new Uo("invalid-format","String does not match format '"+t+"': "+e)}function Wo(t){throw new Uo("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},$o=function(t,e){this.data=t,this.contentType=e||null};function Xo(t,e){switch(t){case Qo.RAW:return new $o(Yo(e));case Qo.BASE64:case Qo.BASE64URL:return new $o(Jo(t,e));case Qo.DATA_URL:return new $o((n=new Zo(e)).base64?Jo(Qo.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(C_){throw Ho(Qo.DATA_URL,"Malformed data URL.")}return Yo(e)}(n.rest),function(t){return new Zo(t).contentType}(e))}var n;throw jo()}function Yo(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Jo(t,e){switch(t){case Qo.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Ho(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Qo.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ho(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(C_){throw Ho(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Zo=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ho(Qo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var ts,es,ns={STATE_CHANGED:"state_changed"},rs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function is(t){switch(t){case"running":case"pausing":case"canceling":return rs.RUNNING;case"paused":return rs.PAUSED;case"success":return rs.SUCCESS;case"canceled":return rs.CANCELED;case"error":default:return rs.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(es=ts||(ts={}))[es.NO_ERROR=0]="NO_ERROR",es[es.NETWORK_ERROR=1]="NETWORK_ERROR",es[es.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var os=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ts.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ts.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ts.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Wo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Wo("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Wo("cannot .getStatus() before sending");try{return this.xhr_.status}catch(C_){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Wo("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ss=function(){function t(){}return t.prototype.createConnection=function(){return new os},t}(),as=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(C_){return new t(e,"")}if(""===r.path)return r;throw new Uo("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new Uo("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),us=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){return"string"==typeof t||t instanceof String}function ls(t){return hs()&&t instanceof Blob}function hs(){return"undefined"!=typeof Blob}function fs(t,e,n,r){if(r<e)throw zo("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw zo("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function ds(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(C_){o(C_)}else null!==s?((r=jo()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Ko():qo()):o(r=new Uo("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new vs(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Wi([null,t],e));else{var i;a()||o?c.call.apply(c,Wi([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new vs(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===ts.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new vs(s,r))}else{var a=r.getErrorCode()===ts.ABORT;e(!1,new vs(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),vs=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ys(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ys();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(hs())return new Blob(t);throw new Uo("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bs=function(){function t(t,e){var n=0,r="";ls(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ls(this.data_)){var r=this.data_,i=(s=e,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new t(i)}var o,s,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(hs()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ms.apply(null,r))}var i=e.map((function(t){return cs(t)?Xo(Qo.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){var e,n;try{e=JSON.parse(t)}catch(C_){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){return e}var Ts=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Es},Is=null;function Ss(){if(Is)return Is;var t=[];t.push(new Ts("bucket")),t.push(new Ts("generation")),t.push(new Ts("metageneration")),t.push(new Ts("name","fullPath",!0));var e=new Ts("name");e.xform=function(t,e){return function(t){return!cs(t)||t.length<2?t:_s(t)}(e)},t.push(e);var n=new Ts("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Ts("timeCreated")),t.push(new Ts("updated")),t.push(new Ts("md5Hash",null,!0)),t.push(new Ts("cacheControl",null,!0)),t.push(new Ts("contentDisposition",null,!0)),t.push(new Ts("contentEncoding",null,!0)),t.push(new Ts("contentLanguage",null,!0)),t.push(new Ts("contentType",null,!0)),t.push(new Ts("metadata","customMetadata",!0)),Is=t}function As(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new as(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Cs(t,e,n){var r=ws(e);return null===r?null:As(t,r,n)}function ks(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,e,n){var r=ws(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new as(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t._makeStorageReference(new as(e,l.name)),r.items.push(a)}return r}(t,e,r)}var Rs=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){if(!t)throw jo()}function Ds(t,e){return function(n,r){var i=Cs(t,r,e);return Ns(null!==i),i}}function Os(t,e){return function(n,r){var i=Cs(t,r,e);return Ns(null!==i),function(t,e,n){var r=ws(e);if(null===r)return null;if(!cs(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return ps("/b/"+o(r)+"/o/"+o(i),n)+ds({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Ps(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Uo("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Uo("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Uo("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Uo("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Ls(t){var e=Ps(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Uo("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Fs(t,e,n){var r=ps(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Rs(r,"GET",Ds(t,n),i);return o.errorHandler=Ls(e),o}function Ms(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=ps(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Rs(s,"GET",function(t,e){return function(n,r){var i=xs(t,e,r);return Ns(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Ps(e),u}function Us(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Vs=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function js(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(C_){Ns(!1)}return Ns(!!n&&-1!==(e||["active"]).indexOf(n)),n}function qs(t,e,n,r,i,o,s,a){var u=new Vs(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Uo("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw Bo();var g=e.maxUploadRetryTime,v=new Rs(n,"POST",(function(t,n){var i,s=js(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Ds(e,o)(t,n):null,new Vs(a,c,"final"===s,i)}),g);return v.headers=p,v.body=d.uploadData(),v.progressCallback=a||null,v.errorHandler=Ps(t),v}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Ss(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Us(e,r,i),a={name:s.fullPath},u=ps(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=ks(s,n),h=t.maxUploadRetryTime,f=new Rs(u,"POST",(function(t){var e;js(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(C_){Ns(!1)}return Ns(cs(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=Ps(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Rs(n,"POST",(function(t){var e=js(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(C_){Ns(!1)}n||Ns(!1);var i=Number(n);return Ns(!isNaN(i)),new Vs(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ps(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Vs(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=qs(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(C_){return t._error=C_,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Fs(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Us(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ks(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=bs.getBlob(c,r,l);if(null===h)throw Bo();var f={name:u.fullPath},p=ps(o,t.host),d=t.maxUploadRetryTime,g=new Rs(p,"POST",Ds(t,n),d);return g.urlParams=f,g.headers=s,g.body=h.uploadData(),g.errorHandler=Ps(e),g}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=qo(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=is(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Bs(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(is(this._state)){case rs.SUCCESS:zs(this._resolve.bind(null,this.snapshot))();break;case rs.CANCELED:case rs.ERROR:zs(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(is(this._state)){case rs.RUNNING:case rs.PAUSED:t.next&&zs(t.next.bind(t,this.snapshot))();break;case rs.SUCCESS:t.complete&&zs(t.complete.bind(t))();break;case rs.CANCELED:case rs.ERROR:t.error&&zs(t.error.bind(t,this._error))();break;default:t.error&&zs(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Gs=function(){function t(t,e){this._service=t,this._location=e instanceof as?e:as.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new as(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return _s(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new as(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Go(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){var e={prefixes:[],items:[]};return Ws(t,e).then((function(){return e}))}function Ws(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o;return Ki(this,(function(s){switch(s.label){case 0:return[4,Qs(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Ws(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Qs(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&fs("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Ms(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function $s(t,e){return zi(this,void 0,void 0,(function(){var n;return Ki(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=ps(e.fullServerUrl(),t.host),o=ks(n,r),s=t.maxOperationRetryTime,a=new Rs(i,"PATCH",Ds(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Ls(e),a}(t.storage,t._location,e,Ss()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Xs(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=ps(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Rs(r,"GET",Os(t,n),i);return o.errorHandler=Ls(e),o}(t.storage,t._location,Ss()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Uo("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Ys(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=ps(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Rs(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Ls(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Js(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new as(t._location.bucket,n);return new Gs(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){return/^[A-Za-z]+:\/\//.test(t)}function ta(t,e){if(t instanceof ra){var n=t;if(null==n._bucket)throw new Uo("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Gs(n,n._bucket);return null!=e?ta(r,e):r}if(void 0!==e){if(e.includes(".."))throw zo('`path` param cannot contain ".."');return Js(t,e)}return t}function ea(t,e){if(e&&Zs(e)){if(t instanceof ra)return new Gs(t,e);throw zo("To use ref(service, url), the first argument must be a Storage instance.")}return ta(t,e)}function na(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:as.makeFromBucketSpec(n,t)}var ra=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?as.makeFromBucketSpec(i,this._host):na(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=as.makeFromBucketSpec(this._url,t):this._bucket=na(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){fs("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){fs("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return zi(this,void 0,void 0,(function(){var t,e;return Ki(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return zi(this,void 0,void 0,(function(){var t;return Ki(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Gs(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new us(Ko());var i=function(t,e,n,r,i,o){var s=ds(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new gs(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return zi(this,void 0,void 0,(function(){var e,n,r;return Ki(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ks(t,new bs(e),n)}(t=ao(t),e,n)}function oa(t){return function(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Fs(t.storage,t._location,Ss()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=ao(t))}function sa(t,e){return ea(t=ao(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aa,ua,ca=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),la=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new ca(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new ca(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new ca(t,i,i._ref))}:{next:e.next?function(t){return e.next(new ca(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ha=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new fa(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new fa(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),fa=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Js(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new la(ia(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Qo.RAW),this._throwIfRoot("putString");var r=Xo(e,t),i=Bi({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new la(new Ks(this._delegate,new bs(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Hs(t=ao(t))).then((function(t){return new ha(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Qs(t=ao(t),e)}(this._delegate,t||void 0).then((function(t){return new ha(t,e.storage)}))},t.prototype.getMetadata=function(){return oa(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return $s(t=ao(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return Xs(ao(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),Ys(ao(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Go(t)},t}(),pa=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Zs(t))throw zo("ref() expected a child path but got a URL, use refFromURL instead.");return new fa(sa(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Zs(t))throw zo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{as.makeFromUrl(t,this._delegate.host)}catch(C_){throw zo("refFromUrl() expected a valid full URL but got an invalid one.")}return new fa(sa(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new pa(r,new ra(r,i,o,new ss,n,Mo.SDK_VERSION))}ua={TaskState:rs,TaskEvent:ns,StringFormat:Qo,Storage:ra,Reference:fa},(aa=Mo).INTERNAL.registerComponent(new uo("storage",da,"PUBLIC").setServiceProps(ua).setMultipleInstances(!0)),aa.registerVersion("@firebase/storage","0.5.6");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ga=function(t,e){return(ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function va(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ya,ma="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ba=ba||{},wa=ma||self;function _a(){}function Ea(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ta(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ia="closure_uid_"+(1e9*Math.random()>>>0),Sa=0;function Aa(t,e,n){return t.call.apply(t.bind,arguments)}function Ca(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ka(t,e,n){return(ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Aa:Ca).apply(null,arguments)}function xa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ra(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Na(){this.s=this.s,this.o=this.o}var Da={};Na.prototype.s=!1,Na.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ia)&&t[Ia]||(t[Ia]=++Sa)}(this);delete Da[t]}},Na.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Oa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Pa=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function La(t){return Array.prototype.concat.apply([],arguments)}function Fa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ma(t){return/^[\s\xa0]*$/.test(t)}var Ua,Va=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ja(t,e){return-1!=t.indexOf(e)}function qa(t,e){return t<e?-1:t>e?1:0}t:{var Ba=wa.navigator;if(Ba){var za=Ba.userAgent;if(za){Ua=za;break t}}Ua=""}function Ka(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ga(t){var e={};for(var n in t)e[n]=t[n];return e}var Ha="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wa(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ha.length;o++)n=Ha[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qa(t){return Qa[" "](t),t}Qa[" "]=_a;var $a,Xa,Ya=ja(Ua,"Opera"),Ja=ja(Ua,"Trident")||ja(Ua,"MSIE"),Za=ja(Ua,"Edge"),tu=Za||Ja,eu=ja(Ua,"Gecko")&&!(ja(Ua.toLowerCase(),"webkit")&&!ja(Ua,"Edge"))&&!(ja(Ua,"Trident")||ja(Ua,"MSIE"))&&!ja(Ua,"Edge"),nu=ja(Ua.toLowerCase(),"webkit")&&!ja(Ua,"Edge");function ru(){var t=wa.document;return t?t.documentMode:void 0}t:{var iu="",ou=(Xa=Ua,eu?/rv:([^\);]+)(\)|;)/.exec(Xa):Za?/Edge\/([\d\.]+)/.exec(Xa):Ja?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xa):nu?/WebKit\/(\S+)/.exec(Xa):Ya?/(?:Version)[ \/]?(\S+)/.exec(Xa):void 0);if(ou&&(iu=ou?ou[1]:""),Ja){var su=ru();if(null!=su&&su>parseFloat(iu)){$a=String(su);break t}}$a=iu}var au,uu={};function cu(){return function(t){var e=uu;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Va(String($a)).split("."),n=Va("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=qa(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||qa(0==o[2].length,0==s[2].length)||qa(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(wa.document&&Ja){var lu=ru();au=lu||(parseInt($a,10)||void 0)}else au=void 0;var hu=au,fu=function(){if(!wa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wa.addEventListener("test",_a,e),wa.removeEventListener("test",_a,e)}catch(n){}return t}();function pu(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function du(t,e){if(pu.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(eu){t:{try{Qa(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gu[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&du.Z.h.call(this)}}pu.prototype.h=function(){this.defaultPrevented=!0},Ra(du,pu);var gu={2:"touch",3:"pen",4:"mouse"};du.prototype.h=function(){du.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vu="closure_listenable_"+(1e6*Math.random()|0),yu=0;function mu(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++yu,this.ca=this.fa=!1}function bu(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function wu(t){this.src=t,this.g={},this.h=0}function _u(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Oa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(bu(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Eu(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}wu.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Eu(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new mu(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Tu="closure_lm_"+(1e6*Math.random()|0),Iu={};function Su(t,e,n,r,i){if(r&&r.once)return Cu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Su(t,e[o],n,r,i);return null}return n=Pu(n),t&&t[vu]?t.N(e,n,Ta(r)?!!r.capture:!!r,i):Au(t,e,n,!1,r,i)}function Au(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ta(i)?!!i.capture:!!i,a=Du(t);if(a||(t[Tu]=a=new wu(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Nu;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fu||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ru(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Cu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Cu(t,e[o],n,r,i);return null}return n=Pu(n),t&&t[vu]?t.O(e,n,Ta(r)?!!r.capture:!!r,i):Au(t,e,n,!0,r,i)}function ku(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ku(t,e[o],n,r,i);else r=Ta(r)?!!r.capture:!!r,n=Pu(n),t&&t[vu]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Eu(o=t.g[e],n,r,i))&&(bu(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Du(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Eu(e,n,r,i)),(n=-1<t?e[t]:null)&&xu(n))}function xu(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[vu])_u(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ru(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Du(e))?(_u(n,t),0==n.h&&(n.src=null,e[Tu]=null)):bu(t)}}}function Ru(t){return t in Iu?Iu[t]:Iu[t]="on"+t}function Nu(t,e){if(t.ca)t=!0;else{e=new du(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&xu(t),t=n.call(r,e)}return t}function Du(t){return(t=t[Tu])instanceof wu?t:null}var Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(t){return"function"==typeof t?t:(t[Ou]||(t[Ou]=function(e){return t.handleEvent(e)}),t[Ou])}function Lu(){Na.call(this),this.i=new wu(this),this.P=this,this.I=null}function Fu(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new pu(e,t);else if(e instanceof pu)e.target=e.target||t;else{var i=e;Wa(e=new pu(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Mu(s,r,!0,e)&&i}if(i=Mu(s=e.g=t,r,!0,e)&&i,i=Mu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Mu(s=e.g=n[o],r,!1,e)&&i}function Mu(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&_u(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ra(Lu,Na),Lu.prototype[vu]=!0,Lu.prototype.removeEventListener=function(t,e,n,r){ku(this,t,e,n,r)},Lu.prototype.M=function(){if(Lu.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)bu(n[r]);delete e.g[t],e.h--}}this.I=null},Lu.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Lu.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Uu=wa.JSON.stringify;function Vu(){var t=Wu,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ju,qu=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Bu.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Bu=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new zu}),(function(t){return t.reset()})),zu=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ku(t){wa.setTimeout((function(){throw t}),0)}function Gu(t,e){ju||function(){var t=wa.Promise.resolve(void 0);ju=function(){t.then(Qu)}}(),Hu||(ju(),Hu=!0),Wu.add(t,e)}var Hu=!1,Wu=new qu;function Qu(){for(var t;t=Vu();){try{t.h.call(t.g)}catch(n){Ku(n)}var e=Bu;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Hu=!1}function $u(t,e){Lu.call(this),this.h=t||1,this.g=e||wa,this.j=ka(this.kb,this),this.l=Date.now()}function Xu(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Yu(t,e,n){if("function"==typeof t)n&&(t=ka(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ka(t.handleEvent,t)}return 2147483647<Number(e)?-1:wa.setTimeout(t,e||0)}function Ju(t){t.g=Yu((function(){t.g=null,t.i&&(t.i=!1,Ju(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Ra($u,Lu),(ya=$u.prototype).da=!1,ya.S=null,ya.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fu(this,"tick"),this.da&&(Xu(this),this.start()))}},ya.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ya.M=function(){$u.Z.M.call(this),Xu(this),delete this.g};var Zu=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ga(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ju(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(wa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Na);function tc(t){Na.call(this),this.h=t,this.g={}}Ra(tc,Na);var ec=[];function nc(t,e,n,r){Array.isArray(n)||(n&&(ec[0]=n.toString()),n=ec);for(var i=0;i<n.length;i++){var o=Su(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function rc(t){Ka(t.g,(function(t,e){this.g.hasOwnProperty(e)&&xu(t)}),t),t.g={}}function ic(){this.g=!0}function oc(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Uu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}tc.prototype.M=function(){tc.Z.M.call(this),rc(this)},tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ic.prototype.Aa=function(){this.g=!1},ic.prototype.info=function(){};var sc={},ac=null;function uc(){return ac=ac||new Lu}function cc(t){pu.call(this,sc.Ma,t)}function lc(t){var e=uc();Fu(e,new cc(e,t))}function hc(t,e){pu.call(this,sc.STAT_EVENT,t),this.stat=e}function fc(t){var e=uc();Fu(e,new hc(e,t))}function pc(t,e){pu.call(this,sc.Na,t),this.size=e}function dc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return wa.setTimeout((function(){t()}),e)}sc.Ma="serverreachability",Ra(cc,pu),sc.STAT_EVENT="statevent",Ra(hc,pu),sc.Na="timingevent",Ra(pc,pu);var gc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yc(){}function mc(t){return t.h||(t.h=t.i())}function bc(){}yc.prototype.h=null;var wc,_c={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ec(){pu.call(this,"d")}function Tc(){pu.call(this,"c")}function Ic(){}function Sc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new tc(this),this.P=Cc,t=tu?125:void 0,this.W=new $u(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ac}function Ac(){this.i=null,this.g="",this.h=!1}Ra(Ec,pu),Ra(Tc,pu),Ra(Ic,yc),Ic.prototype.g=function(){return new XMLHttpRequest},Ic.prototype.i=function(){return{}},wc=new Ic;var Cc=45e3,kc={},xc={};function Rc(t,e,n){t.K=1,t.v=Zc(Wc(e)),t.s=n,t.U=!0,Nc(t,null)}function Nc(t,e){t.F=Date.now(),Lc(t),t.A=Wc(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),fl(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ac,t.g=ph(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Zu(ka(t.Ia,t,t.g),t.O)),nc(t.V,t.g,"readystatechange",t.gb),e=t.H?Ga(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),lc(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Dc(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Oc(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Pc(t,n))==xc){4==e&&(t.o=4,fc(14),i=!1),oc(t.j,t.m,null,"[Incomplete Response]");break}if(r==kc){t.o=4,fc(15),oc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}oc(t.j,t.m,r,null),jc(t,r)}Dc(t)&&r!=xc&&r!=kc&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,fc(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),oh(e),e.L=!0,fc(11))):(oc(t.j,t.m,n,"[Invalid Chunked Response]"),Vc(t),Uc(t))}function Pc(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?xc:(n=Number(e.substring(n,r)),isNaN(n)?kc:(r+=1)+n>e.length?xc:(e=e.substr(r,n),t.C=r+n,e))}function Lc(t){t.Y=Date.now()+t.P,Fc(t,t.P)}function Fc(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=dc(ka(t.eb,t),e)}function Mc(t){t.B&&(wa.clearTimeout(t.B),t.B=null)}function Uc(t){0==t.l.G||t.I||uh(t.l,t)}function Vc(t){Mc(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Xu(t.W),rc(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function jc(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||bl(n.i,t)))if(n.I=t.N,!t.J&&bl(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ah(n),Xl(n)}ih(n),fc(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=dc(ka(n.ab,n),6e3));if(1>=ml(n.i)&&n.ka){try{n.ka()}catch(v){}n.ka=void 0}}else lh(n,11)}else if((t.J||n.g==t)&&ah(n),!Ma(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ja(l,"spdy")||ja(l,"quic")||ja(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(wl(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Jc(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=fh(r,r.H?r.la:null,r.W),p.J){_l(r.i,p);var d=p,g=r.K;g&&d.setTimeout(g),d.B&&(Mc(d),Lc(d)),r.g=p}else rh(r);0<n.l.length&&Zl(n)}else"stop"!=o[0]&&"close"!=o[0]||lh(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?lh(n,7):$l(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}lc(4)}catch(v){}}function qc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ea(t)||"string"==typeof t)Pa(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Ea(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Ea(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Bc(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Bc)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function zc(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Kc(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Kc(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Kc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ya=Sc.prototype).setTimeout=function(t){this.P=t},ya.gb=function(t){t=t.target;var e=this.L;e&&3==Kl(t)?e.l():this.Ia(t)},ya.Ia=function(t){try{if(t==this.g)t:{var e=Kl(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||tu||this.g&&(this.h.h||this.g.ga()||Gl(this.g)))){this.I||4!=e||7==n||lc(8==n||0>=r?3:2),Mc(this);var i=this.g.ba();this.N=i;e:if(Dc(this)){var o=Gl(this.g);t="";var s=o.length,a=4==Kl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vc(this),Uc(this);var u="";break e}this.h.i=new wa.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ma(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,fc(12),Vc(this),Uc(this);break t}oc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jc(this,i)}this.U?(Oc(this,e,u),tu&&this.i&&3==e&&(nc(this.V,this.W,"tick",this.fb),this.W.start())):(oc(this.j,this.m,u,null),jc(this,u)),4==e&&Vc(this),this.i&&!this.I&&(4==e?uh(this.l,this):(this.i=!1,Lc(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,fc(12)):(this.o=0,fc(13)),Vc(this),Uc(this)}}}catch(f){}},ya.fb=function(){if(this.g){var t=Kl(this.g),e=this.g.ga();this.C<e.length&&(Mc(this),Oc(this,t,e),this.i&&4!=t&&Lc(this))}},ya.cancel=function(){this.I=!0,Vc(this)},ya.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(lc(3),fc(17)),Vc(this),this.o=2,Uc(this)):Fc(this,this.Y-t)},(ya=Bc.prototype).R=function(){zc(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ya.T=function(){return zc(this),this.g.concat()},ya.get=function(t,e){return Kc(this.h,t)?this.h[t]:e},ya.set=function(t,e){Kc(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ya.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Gc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hc(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Hc){this.g=void 0!==e?e:t.g,Qc(this,t.j),this.s=t.s,$c(this,t.i),Xc(this,t.m),this.l=t.l,e=t.h;var n=new ul;n.i=e.i,e.g&&(n.g=new Bc(e.g),n.h=e.h),Yc(this,n),this.o=t.o}else t&&(n=String(t).match(Gc))?(this.g=!!e,Qc(this,n[1]||"",!0),this.s=tl(n[2]||""),$c(this,n[3]||"",!0),Xc(this,n[4]),this.l=tl(n[5]||"",!0),Yc(this,n[6]||"",!0),this.o=tl(n[7]||"")):(this.g=!!e,this.h=new ul(null,this.g))}function Wc(t){return new Hc(t)}function Qc(t,e,n){t.j=n?tl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $c(t,e,n){t.i=n?tl(e,!0):e}function Xc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Yc(t,e,n){e instanceof ul?(t.h=e,function(t,e){e&&!t.j&&(cl(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ll(this,e),fl(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=el(e,sl)),t.h=new ul(e,t.g))}function Jc(t,e,n){t.h.set(e,n)}function Zc(t){return Jc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function tl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function el(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nl),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nl(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(el(e,rl,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(el(e,rl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(el(n,"/"==n.charAt(0)?ol:il,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",el(n,al)),t.join("")};var rl=/[#\/\?@]/g,il=/[#\?:]/g,ol=/[#\?]/g,sl=/[#\?@]/g,al=/#/g;function ul(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function cl(t){t.g||(t.g=new Bc,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ll(t,e){cl(t),e=pl(t,e),Kc(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Kc((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&zc(t)))}function hl(t,e){return cl(t),e=pl(t,e),Kc(t.g.h,e)}function fl(t,e,n){ll(t,e),0<n.length&&(t.i=null,t.g.set(pl(t,e),Fa(n)),t.h+=n.length)}function pl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ya=ul.prototype).add=function(t,e){cl(this),this.i=null,t=pl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ya.forEach=function(t,e){cl(this),this.g.forEach((function(n,r){Pa(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ya.T=function(){cl(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ya.R=function(t){cl(this);var e=[];if("string"==typeof t)hl(this,t)&&(e=La(e,this.g.get(pl(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=La(e,t[n])}return e},ya.set=function(t,e){return cl(this),this.i=null,hl(this,t=pl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ya.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ya.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var dl=function(t,e){this.h=t,this.g=e};function gl(t){this.l=t||vl,wa.PerformanceNavigationTiming?t=0<(t=wa.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(wa.g&&wa.g.Ea&&wa.g.Ea()&&wa.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vl=10;function yl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ml(t){return t.h?1:t.g?t.g.size:0}function bl(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function wl(t,e){t.g?t.g.add(e):t.h=e}function _l(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function El(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=va(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Fa(t.i)}function Tl(){}function Il(){this.g=new Tl}function Sl(t,e,n){var r=n||"";try{qc(t,(function(t,n){var i=t;Ta(t)&&(i=Uu(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(C_){throw e.push(r+"type="+encodeURIComponent("_badmap")),C_}}function Al(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Cl(t){this.l=t.$b||null,this.j=t.ib||!1}function kl(t,e){Lu.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gl.prototype.cancel=function(){var t,e;if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=va(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Tl.prototype.stringify=function(t){return wa.JSON.stringify(t,void 0)},Tl.prototype.parse=function(t){return wa.JSON.parse(t,void 0)},Ra(Cl,yc),Cl.prototype.g=function(){return new kl(this.l,this.j)},Cl.prototype.i=function(t){return function(){return t}}({}),Ra(kl,Lu);var xl=0;function Rl(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Nl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Dl(t)}function Dl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ya=kl.prototype).open=function(t,e){if(this.readyState!=xl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Dl(this)},ya.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||wa).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ya.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nl(this)),this.readyState=xl},ya.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Dl(this)),this.g&&(this.readyState=3,Dl(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wa.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rl(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ya.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nl(this):Dl(this),3==this.readyState&&Rl(this)}},ya.Ua=function(t){this.g&&(this.response=this.responseText=t,Nl(this))},ya.Ta=function(t){this.g&&(this.response=t,Nl(this))},ya.ha=function(){this.g&&Nl(this)},ya.setRequestHeader=function(t,e){this.v.append(t,e)},ya.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ya.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ol=wa.JSON.parse;function Pl(t){Lu.call(this),this.headers=new Bc,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ll,this.K=this.L=!1}Ra(Pl,Lu);var Ll="",Fl=/^https?$/i,Ml=["POST","PUT"];function Ul(t){return"content-type"==t.toLowerCase()}function Vl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jl(t),Bl(t)}function jl(t){t.D||(t.D=!0,Fu(t,"complete"),Fu(t,"error"))}function ql(t){if(t.h&&void 0!==ba&&(!t.C[1]||4!=Kl(t)||2!=t.ba()))if(t.v&&4==Kl(t))Yu(t.Fa,0,t);else if(Fu(t,"readystatechange"),4==Kl(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Gc)[1]||null;if(!o&&wa.self&&wa.self.location){var s=wa.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fl.test(o?o.toLowerCase():"")}e=i}if(e)Fu(t,"complete"),Fu(t,"success");else{t.m=6;try{var a=2<Kl(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",jl(t)}}finally{Bl(t)}}}function Bl(t,e){if(t.g){zl(t);var n=t.g,r=t.C[0]?_a:null;t.g=null,t.C=null,e||Fu(t,"ready");try{n.onreadystatechange=r}catch(C_){}}}function zl(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(wa.clearTimeout(t.A),t.A=null)}function Kl(t){return t.g?t.g.readyState:0}function Gl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ll:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ka(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Jc(t,e,n))}function Wl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ql(t){this.za=0,this.l=[],this.h=new ic,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wl("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wl("baseRetryDelayMs",5e3,t),this.$a=Wl("retryDelaySeedMs",1e4,t),this.Ya=Wl("forwardChannelMaxRetries",2,t),this.ra=Wl("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new gl(t&&t.concurrentRequestLimit),this.Ca=new Il,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function $l(t){if(Yl(t),3==t.G){var e=t.V++,n=Wc(t.F);Jc(n,"SID",t.J),Jc(n,"RID",e),Jc(n,"TYPE","terminate"),eh(t,n),(e=new Sc(t,t.h,e,void 0)).K=2,e.v=Zc(Wc(n)),n=!1,wa.navigator&&wa.navigator.sendBeacon&&(n=wa.navigator.sendBeacon(e.v.toString(),"")),!n&&wa.Image&&((new Image).src=e.v,n=!0),n||(e.g=ph(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Lc(e)}hh(t)}function Xl(t){t.g&&(oh(t),t.g.cancel(),t.g=null)}function Yl(t){Xl(t),t.u&&(wa.clearTimeout(t.u),t.u=null),ah(t),t.i.cancel(),t.m&&("number"==typeof t.m&&wa.clearTimeout(t.m),t.m=null)}function Jl(t,e){t.l.push(new dl(t.Za++,e)),3==t.G&&Zl(t)}function Zl(t){yl(t.i)||t.m||(t.m=!0,Gu(t.Ha,t),t.C=0)}function th(t,e){var n;n=e?e.m:t.V++;var r=Wc(t.F);Jc(r,"SID",t.J),Jc(r,"RID",n),Jc(r,"AID",t.U),eh(t,r),t.o&&t.s&&Hl(r,t.o,t.s),n=new Sc(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=nh(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),wl(t.i,n),Rc(n,r,e)}function eh(t,e){t.j&&qc({},(function(t,n){Jc(e,n,t)}))}function nh(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ka(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Sl(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function rh(t){t.g||t.u||(t.Y=1,Gu(t.Ga,t),t.A=0)}function ih(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=dc(ka(t.Ga,t),ch(t,t.A)),t.A++,!0)}function oh(t){null!=t.B&&(wa.clearTimeout(t.B),t.B=null)}function sh(t){t.g=new Sc(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Wc(t.oa);Jc(e,"RID","rpc"),Jc(e,"SID",t.J),Jc(e,"CI",t.N?"0":"1"),Jc(e,"AID",t.U),eh(t,e),Jc(e,"TYPE","xmlhttp"),t.o&&t.s&&Hl(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Zc(Wc(e)),n.s=null,n.U=!0,Nc(n,t)}function ah(t){null!=t.v&&(wa.clearTimeout(t.v),t.v=null)}function uh(t,e){var n=null;if(t.g==e){ah(t),oh(t),t.g=null;var r=2}else{if(!bl(t.i,e))return;n=e.D,_l(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Fu(r=uc(),new pc(r,n,e,i)),Zl(t)}else rh(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ml(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=dc(ka(t.Ha,t,e),ch(t,t.C)),t.C++,0)))}(t,e)||2==r&&ih(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:lh(t,5);break;case 4:lh(t,10);break;case 3:lh(t,6);break;default:lh(t,2)}}function ch(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function lh(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ka(t.jb,t);n||(n=new Hc("//www.google.com/images/cleardot.gif"),wa.location&&"http"==wa.location.protocol||Qc(n,"https"),Zc(n)),function(t,e){var n=new ic;if(wa.Image){var r=new Image;r.onload=xa(Al,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xa(Al,n,r,"TestLoadImage: error",!1,e),r.onabort=xa(Al,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xa(Al,n,r,"TestLoadImage: timeout",!1,e),wa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else fc(2);t.G=0,t.j&&t.j.va(e),hh(t),Yl(t)}function hh(t){t.G=0,t.I=-1,t.j&&(0==El(t.i).length&&0==t.l.length||(t.i.i.length=0,Fa(t.l),t.l.length=0),t.j.ua())}function fh(t,e,n){var r=function(t){return t instanceof Hc?Wc(t):new Hc(t,void 0)}(n);if(""!=r.i)e&&$c(r,e+"."+r.i),Xc(r,r.m);else{var i=wa.location;r=function(t,e,n,r){var i=new Hc(null,void 0);return t&&Qc(i,t),e&&$c(i,e),n&&Xc(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ka(t.aa,(function(t,e){Jc(r,e,t)})),e=t.D,n=t.sa,e&&n&&Jc(r,e,n),Jc(r,"VER",t.ma),eh(t,r),r}function ph(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Pl(new Cl({ib:!0})):new Pl(t.qa)).L=t.H,e}function dh(){}function gh(){if(Ja&&!(10<=Number(hu)))throw Error("Environmental error: no available transport.")}function vh(t,e){Lu.call(this),this.g=new Ql(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ma(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ma(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new bh(this)}function yh(t){Ec.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function mh(){Tc.call(this),this.status=1}function bh(t){this.g=t}(ya=Pl.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wc.g(),this.C=this.u?mc(this.u):mc(wc),this.g.onreadystatechange=ka(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Vl(this,o)}t=n||"";var i=new Bc(this.headers);r&&qc(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Ul,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=wa.FormData&&t instanceof wa.FormData,!(0<=Oa(Ml,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zl(this),0<this.B&&((this.K=function(t){return Ja&&cu()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ka(this.pa,this)):this.A=Yu(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Vl(this,o)}},ya.pa=function(){void 0!==ba&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fu(this,"timeout"),this.abort(8))},ya.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Fu(this,"complete"),Fu(this,"abort"),Bl(this))},ya.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bl(this,!0)),Pl.Z.M.call(this)},ya.Fa=function(){this.s||(this.F||this.v||this.l?ql(this):this.cb())},ya.cb=function(){ql(this)},ya.ba=function(){try{return 2<Kl(this)?this.g.status:-1}catch(Xa){return-1}},ya.ga=function(){try{return this.g?this.g.responseText:""}catch(Xa){return""}},ya.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ol(e)}},ya.Da=function(){return this.m},ya.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ya=Ql.prototype).ma=8,ya.G=1,ya.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},ya.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Sc(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Wa(n=Ga(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=nh(this,e,r),Jc(i=Wc(this.F),"RID",t),Jc(i,"CVER",22),this.D&&Jc(i,"X-HTTP-Session-Id",this.D),eh(this,i),this.o&&n&&Hl(i,this.o,n),wl(this.i,e),this.Ra&&Jc(i,"TYPE","init"),this.ja?(Jc(i,"$req",r),Jc(i,"SID","null"),e.$=!0,Rc(e,i,null)):Rc(e,i,r),this.G=2}}else 3==this.G&&(t?th(this,t):0==this.l.length||yl(this.i)||th(this))},ya.Ga=function(){if(this.u=null,sh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=dc(ka(this.bb,this),t)}},ya.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fc(10),Xl(this),sh(this))},ya.ab=function(){null!=this.v&&(this.v=null,Xl(this),ih(this),fc(19))},ya.jb=function(t){t?(this.h.info("Successfully pinged google.com"),fc(2)):(this.h.info("Failed to ping google.com"),fc(1))},(ya=dh.prototype).xa=function(){},ya.wa=function(){},ya.va=function(){},ya.ua=function(){},ya.Oa=function(){},gh.prototype.g=function(t,e){return new vh(t,e)},Ra(vh,Lu),vh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Gu(ka(t.hb,t,e))),fc(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=fh(t,null,t.W),Zl(t)},vh.prototype.close=function(){$l(this.g)},vh.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Jl(this.g,e)}else this.v?((e={}).__data__=Uu(t),Jl(this.g,e)):Jl(this.g,t)},vh.prototype.M=function(){this.g.j=null,delete this.j,$l(this.g),delete this.g,vh.Z.M.call(this)},Ra(yh,Ec),Ra(mh,Tc),Ra(bh,dh),bh.prototype.xa=function(){Fu(this.g,"a")},bh.prototype.wa=function(t){Fu(this.g,new yh(t))},bh.prototype.va=function(t){Fu(this.g,new mh(t))},bh.prototype.ua=function(){Fu(this.g,"b")},gh.prototype.createWebChannel=gh.prototype.g,vh.prototype.send=vh.prototype.u,vh.prototype.open=vh.prototype.m,vh.prototype.close=vh.prototype.close,gc.NO_ERROR=0,gc.TIMEOUT=8,gc.HTTP_ERROR=6,vc.COMPLETE="complete",bc.EventType=_c,_c.OPEN="a",_c.CLOSE="b",_c.ERROR="c",_c.MESSAGE="d",Lu.prototype.listen=Lu.prototype.N,Pl.prototype.listenOnce=Pl.prototype.O,Pl.prototype.getLastError=Pl.prototype.La,Pl.prototype.getLastErrorCode=Pl.prototype.Da,Pl.prototype.getStatus=Pl.prototype.ba,Pl.prototype.getResponseJson=Pl.prototype.Qa,Pl.prototype.getResponseText=Pl.prototype.ga,Pl.prototype.send=Pl.prototype.ea;var wh=gc,_h=vc,Eh=sc,Th=10,Ih=11,Sh=Cl,Ah=bc,Ch=Pl,kh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();kh.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return qi(e,t),e}(Error),Nh=new Eo("@firebase/firestore");function Dh(){return Nh.logLevel}function Oh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nh.logLevel<=po.DEBUG){var r=e.map(Fh);Nh.debug.apply(Nh,Wi(["Firestore (8.7.0): "+t],r))}}function Ph(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nh.logLevel<=po.ERROR){var r=e.map(Fh);Nh.error.apply(Nh,Wi(["Firestore (8.7.0): "+t],r))}}function Lh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nh.logLevel<=po.WARN){var r=e.map(Fh);Nh.warn.apply(Nh,Wi(["Firestore (8.7.0): "+t],r))}}function Fh(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw Ph(e),new Error(e)}function Uh(t,e){t||Mh()}function Vh(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=jh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Bh(t,e){return t<e?-1:t>e?1:0}function zh(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Kh(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Rh(xh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Rh(xh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Rh(xh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rh(xh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Bh(this.nanoseconds,t.nanoseconds):Bh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Hh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Gh(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $h(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mh(),void 0===n?n=t.length-e:n>t.length-e&&Mh(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Rh(xh.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xh),Jh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Jh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Rh(xh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Rh(xh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Rh(xh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Rh(xh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xh),tf=function(){function t(t){this.fields=t,t.sort(Zh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zh(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ef=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Bh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ef.EMPTY_BYTE_STRING=new ef("");var nf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rf(t){if(Uh(!!t),"string"==typeof t){var e=0,n=nf.exec(t);if(Uh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:of(t.seconds),nanos:of(t.nanos)}}function of(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function sf(t){return"string"==typeof t?ef.fromBase64String(t):ef.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uf(t){var e=t.mapValue.fields.__previous_value__;return af(e)?uf(e):e}function cf(t){var e=rf(t.mapValue.fields.__local_write_time__.timestampValue);return new Gh(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t){return null==t}function hf(t){return 0===t&&1/t==-1/0}function ff(t){return"number"==typeof t&&Number.isInteger(t)&&!hf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yh.fromString(e))},t.fromName=function(e){return new t(Yh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yh(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?af(t)?4:10:Mh()}function gf(t,e){var n,r=df(t);if(r!==df(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cf(t).isEqual(cf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=rf(t.timestampValue),r=rf(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,sf(t.bytesValue).isEqual(sf(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return of(t.geoPointValue.latitude)===of(e.geoPointValue.latitude)&&of(t.geoPointValue.longitude)===of(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return of(t.integerValue)===of(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=of(t.doubleValue),r=of(e.doubleValue);return n===r?hf(n)===hf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zh(t.arrayValue.values||[],e.arrayValue.values||[],gf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wh(n)!==Wh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gf(n[i],r[i])))return!1;return!0}(t,e);default:return Mh()}}function vf(t,e){return void 0!==(t.values||[]).find((function(t){return gf(t,e)}))}function yf(t,e){var n,r,i,o,s=df(t),a=df(e);if(s!==a)return Bh(s,a);switch(s){case 0:return 0;case 1:return Bh(t.booleanValue,e.booleanValue);case 2:return r=e,i=of((n=t).integerValue||n.doubleValue),o=of(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return mf(t.timestampValue,e.timestampValue);case 4:return mf(cf(t),cf(e));case 5:return Bh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=sf(t),r=sf(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Bh(n[i],r[i]);if(0!==o)return o}return Bh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Bh(of(t.latitude),of(e.latitude));return 0!==n?n:Bh(of(t.longitude),of(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=yf(n[i],r[i]);if(o)return o}return Bh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Bh(r[s],o[s]);if(0!==a)return a;var u=yf(n[r[s]],i[o[s]]);if(0!==u)return u}return Bh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mh()}}function mf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Bh(t,e);var n=rf(t),r=rf(e),i=Bh(n.seconds,r.seconds);return 0!==i?i:Bh(n.nanos,r.nanos)}function bf(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=rf(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?sf(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,pf.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=wf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+wf(t.fields[o])}return e+"}"}(t.mapValue):Mh();var e,n,r,i}function _f(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ef(t){return!!t&&"integerValue"in t}function Tf(t){return!!t&&"arrayValue"in t}function If(t){return!!t&&"nullValue"in t}function Sf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function Cf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},rf(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Qh(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Cf(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cf(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kf=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Af(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cf(e)},t.prototype.setAll=function(t){var e=this,n=Zh.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Cf(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Af(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return gf(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Af(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Qh(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Cf(this.value))},t}();function xf(t){var e=[];return Qh(t.fields,(function(t,n){var r=new Zh([t]);if(Af(n)){var i=xf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new tf(e)}var Rf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Hh.min(),kf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,kf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,kf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=kf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=kf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Nf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Nf(t,e,n,r,i,o,s)}function Of(t){var e=Vh(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+bf(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Hf(e.startAt)),e.endAt&&(n+="|ub:",n+=Hf(e.endAt)),e.h=n}return e.h}function Pf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Qf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!gf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xf(t.startAt,e.startAt)&&Xf(t.endAt,e.endAt)}function Lf(t){return pf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return qi(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Mf(t,n,r):"array-contains"===n?new qf(t,r):"in"===n?new Bf(t,r):"not-in"===n?new zf(t,r):"array-contains-any"===n?new Kf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Uf(t,n):new Vf(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(yf(e,this.value)):null!==e&&df(this.value)===df(e)&&this.m(yf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mh()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=pf.fromName(r.referenceValue),i}return qi(e,t),e.prototype.matches=function(t){var e=pf.comparator(t.key,this.key);return this.m(e)},e}(Ff),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=jf("in",n),r}return qi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ff),Vf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=jf("not-in",n),r}return qi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ff);function jf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return pf.fromName(t.referenceValue)}))}var qf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return qi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Tf(e)&&vf(e.arrayValue,this.value)},e}(Ff),Bf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return qi(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&vf(this.value.arrayValue,e)},e}(Ff),zf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return qi(e,t),e.prototype.matches=function(t){if(vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!vf(this.value.arrayValue,e)},e}(Ff),Kf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return qi(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return vf(e.value.arrayValue,t)}))},e}(Ff),Gf=function(t,e){this.position=t,this.before=e};function Hf(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return bf(t)})).join(",")}var Wf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function $f(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?pf.comparator(pf.fromName(s.referenceValue),n.key):yf(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Xf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!gf(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yf=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Jf(t,e,n,r,i,o,s,a){return new Yf(t,e,n,r,i,o,s,a)}function Zf(t){return new Yf(t)}function tp(t){return!lf(t.limit)&&"F"===t.limitType}function ep(t){return!lf(t.limit)&&"L"===t.limitType}function np(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rp(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ip(t){return null!==t.collectionGroup}function op(t){var e=Vh(t);if(null===e.p){e.p=[];var n=rp(e),r=np(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Wf(n)),e.p.push(new Wf(Zh.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Wf(Zh.keyField(),u))}}}return e.p}function sp(t){var e=Vh(t);if(!e.T)if("F"===e.limitType)e.T=Df(e.path,e.collectionGroup,op(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=op(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Wf(o.field,s))}var a=e.endAt?new Gf(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Gf(e.startAt.position,!e.startAt.before):null;e.T=Df(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ap(t,e,n){return new Yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return Pf(sp(t),sp(e))&&t.limitType===e.limitType}function cp(t){return Of(sp(t))+"|lt:"+t.limitType}function lp(t){return"Query(target="+(e=sp(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+bf(e.value);var e})).join(", ")+"]"),lf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Hf(e.startAt)),e.endAt&&(n+=", endAt: "+Hf(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function hp(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pf.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!$f(t.startAt,op(t),e)||t.endAt&&$f(t.endAt,op(t),e))}(t,e);var n,r,i}function fp(t){return function(e,n){for(var r=!1,i=0,o=op(t);i<o.length;i++){var s=o[i],a=pp(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function pp(t,e,n){var r,i,o,s,a=t.field.isKeyField()?pf.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?yf(o,s):Mh());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Mh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function gp(t){return{integerValue:""+t}}function vp(t,e){return ff(e)?gp(e):dp(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yp=function(){this._=void 0};function mp(t,e,n){return t instanceof _p?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Ep?Tp(t,e):t instanceof Ip?Sp(t,e):function(t,e){var n=wp(t,e),r=Cp(n)+Cp(t.A);return Ef(n)&&Ef(t.A)?gp(r):dp(t.R,r)}(t,e);var r,i,o}function bp(t,e,n){return t instanceof Ep?Tp(t,e):t instanceof Ip?Sp(t,e):n}function wp(t,e){return t instanceof Ap?Ef(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var _p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e}(yp),Ep=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return qi(e,t),e}(yp);function Tp(t,e){for(var n=kp(e),r=function(t){n.some((function(e){return gf(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return qi(e,t),e}(yp);function Sp(t,e){for(var n=kp(e),r=function(t){n=n.filter((function(e){return!gf(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ap=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return qi(e,t),e}(yp);function Cp(t){return of(t.integerValue||t.doubleValue)}function kp(t){return Tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xp=function(t,e){this.field=t,this.transform=e},Rp=function(t,e){this.version=t,this.transformResults=e},Np=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Dp(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Op=function(){};function Pp(t,e,n){var r,i,o,s,a;t instanceof Vp?(i=e,o=n,s=(r=t).value.clone(),a=Bp(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof jp?function(t,e,n){if(Dp(t.precondition,e)){var r=Bp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(qp(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Lp(t,e,n){var r;t instanceof Vp?function(t,e,n){if(Dp(t.precondition,e)){var r=t.value.clone(),i=zp(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Up(e),r).setHasLocalMutations()}}(t,e,n):t instanceof jp?function(t,e,n){if(Dp(t.precondition,e)){var r=zp(t.fieldTransforms,n,e),i=e.data;i.setAll(qp(t)),i.setAll(r),e.convertToFoundDocument(Up(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Dp(t.precondition,r)&&r.convertToNoDocument(Hh.min()))}function Fp(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=wp(o.transform,s||null);null!=a&&(null==n&&(n=kf.empty()),n.set(o.field,a))}return n||null}function Mp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&zh(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Ep&&o instanceof Ep||i instanceof Ip&&o instanceof Ip?zh(i.elements,o.elements,gf):i instanceof Ap&&o instanceof Ap?gf(i.A,o.A):i instanceof _p&&o instanceof _p);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Up(t){return t.isFoundDocument()?t.version:Hh.min()}var Vp=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return qi(e,t),e}(Op),jp=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return qi(e,t),e}(Op);function qp(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Bp(t,e,n){var r=new Map;Uh(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,bp(s,a,n[i]))}return r}function zp(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,mp(a,u,e))}return r}var Kp,Gp,Hp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return qi(e,t),e}(Op),Wp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return qi(e,t),e}(Op),Qp=function(t){this.count=t};function $p(t){switch(t){case xh.OK:return Mh();case xh.CANCELLED:case xh.UNKNOWN:case xh.DEADLINE_EXCEEDED:case xh.RESOURCE_EXHAUSTED:case xh.INTERNAL:case xh.UNAVAILABLE:case xh.UNAUTHENTICATED:return!1;case xh.INVALID_ARGUMENT:case xh.NOT_FOUND:case xh.ALREADY_EXISTS:case xh.PERMISSION_DENIED:case xh.FAILED_PRECONDITION:case xh.ABORTED:case xh.OUT_OF_RANGE:case xh.UNIMPLEMENTED:case xh.DATA_LOSS:return!0;default:return Mh()}}function Xp(t){if(void 0===t)return Ph("GRPC error has no .code"),xh.UNKNOWN;switch(t){case Kp.OK:return xh.OK;case Kp.CANCELLED:return xh.CANCELLED;case Kp.UNKNOWN:return xh.UNKNOWN;case Kp.DEADLINE_EXCEEDED:return xh.DEADLINE_EXCEEDED;case Kp.RESOURCE_EXHAUSTED:return xh.RESOURCE_EXHAUSTED;case Kp.INTERNAL:return xh.INTERNAL;case Kp.UNAVAILABLE:return xh.UNAVAILABLE;case Kp.UNAUTHENTICATED:return xh.UNAUTHENTICATED;case Kp.INVALID_ARGUMENT:return xh.INVALID_ARGUMENT;case Kp.NOT_FOUND:return xh.NOT_FOUND;case Kp.ALREADY_EXISTS:return xh.ALREADY_EXISTS;case Kp.PERMISSION_DENIED:return xh.PERMISSION_DENIED;case Kp.FAILED_PRECONDITION:return xh.FAILED_PRECONDITION;case Kp.ABORTED:return xh.ABORTED;case Kp.OUT_OF_RANGE:return xh.OUT_OF_RANGE;case Kp.UNIMPLEMENTED:return xh.UNIMPLEMENTED;case Kp.DATA_LOSS:return xh.DATA_LOSS;default:return Mh()}}(Gp=Kp||(Kp={}))[Gp.OK=0]="OK",Gp[Gp.CANCELLED=1]="CANCELLED",Gp[Gp.UNKNOWN=2]="UNKNOWN",Gp[Gp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gp[Gp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gp[Gp.NOT_FOUND=5]="NOT_FOUND",Gp[Gp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gp[Gp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gp[Gp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gp[Gp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gp[Gp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gp[Gp.ABORTED=10]="ABORTED",Gp[Gp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gp[Gp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gp[Gp.INTERNAL=13]="INTERNAL",Gp[Gp.UNAVAILABLE=14]="UNAVAILABLE",Gp[Gp.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yp=function(){function t(t,e){this.comparator=t,this.root=e||Zp.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zp.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zp.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Jp(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Jp(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Jp(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Jp(this.root,t,this.comparator,!0)},t}(),Jp=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Zp=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mh();if(this.right.isRed())throw Mh();var t=this.left.check();if(t!==this.right.check())throw Mh();return t+(this.isRed()?0:1)},t}();Zp.EMPTY=null,Zp.RED=!0,Zp.BLACK=!1,Zp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Zp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var td=function(){function t(t){this.comparator=t,this.data=new Yp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ed(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ed(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ed=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),nd=new Yp(pf.comparator);function rd(){return nd}var id=new Yp(pf.comparator);function od(){return id}var sd=new Yp(pf.comparator);var ad=new td(pf.comparator);function ud(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ad,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var cd=new td(Bh);function ld(){return cd}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Hh.min(),r,ld(),rd(),ud())},t}(),fd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ef.EMPTY_BYTE_STRING,n,ud(),ud(),ud())},t}(),pd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},dd=function(t,e){this.targetId=t,this.V=e},gd=function(t,e,n,r){void 0===n&&(n=ef.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vd=function(){function t(){this.S=0,this.D=bd(),this.C=ef.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=ud(),e=ud(),n=ud();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mh()}})),new fd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=bd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),yd=function(){function t(t){this.W=t,this.G=new Map,this.H=rd(),this.J=md(),this.Y=new td(Bh)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Mh()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Lf(i))if(0===n){var o=new pf(i.path);this.tt(e,o,Rf.newNoDocument(o,Hh.min()))}else Uh(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Lf(o.target)){var s=new pf(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Rf.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ud();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new hd(t,n,this.Y,this.H,r);return this.H=rd(),this.J=md(),this.Y=new td(Bh),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new vd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new td(Bh),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Oh("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new vd),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function md(){return new Yp(pf.comparator)}function bd(){return new Yp(pf.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wd={asc:"ASCENDING",desc:"DESCENDING"},_d={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ed=function(t,e){this.databaseId=t,this.I=e};function Td(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Id(t,e){return t.I?e.toBase64():e.toUint8Array()}function Sd(t,e){return Td(t,e.toTimestamp())}function Ad(t){return Uh(!!t),Hh.fromTimestamp((e=rf(t),new Gh(e.seconds,e.nanos)));var e}function Cd(t,e){return(n=t,new Yh(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function kd(t){var e=Yh.fromString(t);return Uh(Yd(e)),e}function xd(t,e){return Cd(t.databaseId,e.path)}function Rd(t,e){var n=kd(e);if(n.get(1)!==t.databaseId.projectId)throw new Rh(xh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Rh(xh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pf(Pd(n))}function Nd(t,e){return Cd(t.databaseId,e)}function Dd(t){var e=kd(t);return 4===e.length?Yh.emptyPath():Pd(e)}function Od(t){return new Yh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pd(t){return Uh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ld(t,e,n){return{name:xd(t,e),fields:n.value.mapValue.fields}}function Fd(t,e){var n,r,i;if(e instanceof Vp)n={update:Ld(t,e.key,e.value)};else if(e instanceof Hp)n={delete:xd(t,e.key)};else if(e instanceof jp)n={update:Ld(t,e.key,e.data),updateMask:Xd(e.fieldMask)};else{if(!(e instanceof Wp))return Mh();n={verify:xd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof _p)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ep)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ip)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ap)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Mh()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:Sd(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Mh())),n}function Md(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Np.updateTime(Ad(n.updateTime)):void 0!==n.exists?Np.exists(n.exists):Np.none():Np.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Uh("REQUEST_TIME"===e.setToServerValue),n=new _p;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ep(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ip(i)}else"increment"in e?n=new Ap(t,e.increment):Mh();var o=Zh.fromServerFormat(e.fieldPath);return new xp(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Rd(t,e.update.name),s=new kf({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new tf(e.map((function(t){return Zh.fromServerFormat(t)})))}(e.updateMask);return new jp(o,s,a,r,i)}return new Vp(o,s,r,i)}if(e.delete){var u=Rd(t,e.delete);return new Hp(u,r)}if(e.verify){var c=Rd(t,e.verify);return new Wp(c,r)}return Mh()}function Ud(t,e){return{documents:[Nd(t,e.path)]}}function Vd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Nd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Nd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Sf(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NAN"}};if(If(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Sf(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NAN"}};if(If(t.value))return{unaryFilter:{field:Hd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hd(t.field),op:Gd(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Hd((e=t).field),direction:Kd(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||lf(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Bd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Bd(e.endAt)),n}function jd(t){var e=Dd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Uh(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=qd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Wf(Wd((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=lf(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=zd(n.startAt));var f=null;return n.endAt&&(f=zd(n.endAt)),Jf(e,i,a,s,l,"F",h,f)}function qd(t){return t?void 0!==t.unaryFilter?[$d(t)]:void 0!==t.fieldFilter?[Qd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return qd(t)})).reduce((function(t,e){return t.concat(e)})):Mh():[]}function Bd(t){return{before:t.before,values:t.position}}function zd(t){var e=!!t.before,n=t.values||[];return new Gf(n,e)}function Kd(t){return wd[t]}function Gd(t){return _d[t]}function Hd(t){return{fieldPath:t.canonicalString()}}function Wd(t){return Zh.fromServerFormat(t.fieldPath)}function Qd(t){return Ff.create(Wd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mh()}}(t.fieldFilter.op),t.fieldFilter.value)}function $d(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Wd(t.unaryFilter.field);return Ff.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Wd(t.unaryFilter.field);return Ff.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wd(t.unaryFilter.field);return Ff.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wd(t.unaryFilter.field);return Ff.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mh()}}function Xd(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Yd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=tg(e)),e=Zd(t.get(n),e);return tg(e)}function Zd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function tg(t){return t+""}function eg(t){var e=t.length;if(Uh(e>=2),2===e)return Uh(""===t.charAt(0)&&""===t.charAt(1)),Yh.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Mh(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Mh()}o=s+2}return new Yh(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ng=function(t,e){this.seconds=t,this.nanoseconds=e},rg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};rg.store="owner",rg.key="owner";var ig=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ig.store="mutationQueues",ig.keyPath="userId";var og=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};og.store="mutations",og.keyPath="batchId",og.userMutationsIndex="userMutationsIndex",og.userMutationsKeyPath=["userId","batchId"];var sg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Jd(e)]},t.key=function(t,e,n){return[t,Jd(e),n]},t}();sg.store="documentMutations",sg.PLACEHOLDER=new sg;var ag=function(t,e){this.path=t,this.readTime=e},ug=function(t,e){this.path=t,this.version=e},cg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};cg.store="remoteDocuments",cg.readTimeIndex="readTimeIndex",cg.readTimeIndexPath="readTime",cg.collectionReadTimeIndex="collectionReadTimeIndex",cg.collectionReadTimeIndexPath=["parentPath","readTime"];var lg=function(t){this.byteSize=t};lg.store="remoteDocumentGlobal",lg.key="remoteDocumentGlobalKey";var hg=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hg.store="targets",hg.keyPath="targetId",hg.queryTargetsIndexName="queryTargetsIndex",hg.queryTargetsKeyPath=["canonicalId","targetId"];var fg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};fg.store="targetDocuments",fg.keyPath=["targetId","path"],fg.documentTargetsIndex="documentTargetsIndex",fg.documentTargetsKeyPath=["path","targetId"];var pg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pg.key="targetGlobalKey",pg.store="targetGlobal";var dg=function(t,e){this.collectionId=t,this.parent=e};dg.store="collectionParents",dg.keyPath=["collectionId","parent"];var gg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};gg.store="clientMetadata",gg.keyPath="clientId";var vg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};vg.store="bundles",vg.keyPath="bundleId";var yg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};yg.store="namedQueries",yg.keyPath="name";var mg=Wi(Wi([],Wi(Wi([],Wi(Wi([],Wi(Wi([],[ig.store,og.store,sg.store,cg.store,hg.store,rg.store,pg.store,fg.store]),[gg.store])),[lg.store])),[dg.store])),[vg.store,yg.store]),bg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),_g=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Eg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Mh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Tg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new _g,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ag(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ng(e.target.error);n.ft.reject(new Ag(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ag(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Oh("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new kg(e)},t}(),Ig=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Yi())&&Ph("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Oh("SimpleDb","Removing database:",t),xg(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Yi(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return zi(this,void 0,void 0,(function(){var e,n=this;return Ki(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Oh("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ag(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Rh(xh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ag(t,n))},i.onupgradeneeded=function(t){Oh("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Oh("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return zi(this,void 0,void 0,(function(){var i,o,s,a,u;return Ki(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Ki(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Tg.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Eg.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Oh("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Sg=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return xg(this.Pt.delete())},t}(),Ag=function(t){function e(e,n){var r=this;return(r=t.call(this,xh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return qi(e,t),e}(Rh);function Cg(t){return"IndexedDbTransactionError"===t.name}var kg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Oh("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Oh("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),xg(n)},t.prototype.add=function(t){return Oh("SimpleDb","ADD",this.store.name,t,t),xg(this.store.add(t))},t.prototype.get=function(t){var e=this;return xg(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Oh("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Oh("SimpleDb","DELETE",this.store.name,t),xg(this.store.delete(t))},t.prototype.count=function(){return Oh("SimpleDb","COUNT",this.store.name),xg(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Oh("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Eg((function(n,r){e.onerror=function(t){var e=Ng(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Eg((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Sg(i),s=e(i.primaryKey,i.value,o);if(s instanceof Eg){var a=s.catch((function(t){return o.done(),Eg.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Eg.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function xg(t){return new Eg((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ng(t.target.error);n(e)}}))}var Rg=!1;function Ng(t){var e=Ig._t(Yi());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Rh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rg||(Rg=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return qi(e,t),e}(wg);function Og(t,e){var n=Vh(t);return Ig.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Pp(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Lp(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Lp(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hh.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ud())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zh(this.mutations,t.mutations,(function(t,e){return Mp(t,e)}))&&zh(this.baseMutations,t.baseMutations,(function(t,e){return Mp(t,e)}))},t}(),Lg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Uh(e.mutations.length===r.length);for(var i=sd,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fg=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Hh.min()),void 0===o&&(o=Hh.min()),void 0===s&&(s=ef.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Mg=function(t){this.Lt=t};function Ug(t,e){if(e.document)return function(t,e,n){var r=Rd(t,e.name),i=Ad(e.updateTime),o=new kf({mapValue:{fields:e.fields}}),s=Rf.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=pf.fromSegments(e.noDocument.path),r=zg(e.noDocument.readTime),i=Rf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=pf.fromSegments(e.unknownDocument.path);return r=zg(e.unknownDocument.version),Rf.newUnknownDocument(o,r)}return Mh()}function Vg(t,e,n){var r,i,o=jg(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:xd(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:Td(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new cg(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=Bg(e.version);return u=e.hasCommittedMutations,new cg(null,new ag(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=Bg(e.version);return new cg(new ug(h,f),null,null,!0,o,s)}return Mh()}function jg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qg(t){var e=new Gh(t[0],t[1]);return Hh.fromTimestamp(e)}function Bg(t){var e=t.toTimestamp();return new ng(e.seconds,e.nanoseconds)}function zg(t){var e=new Gh(t.seconds,t.nanoseconds);return Hh.fromTimestamp(e)}function Kg(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Md(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Md(t.Lt,e)})),a=Gh.fromMillis(e.localWriteTimeMs);return new Pg(e.batchId,a,n,s)}function Gg(t){var e,n,r=zg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?zg(t.lastLimboFreeSnapshotVersion):Hh.min();return void 0!==t.query.documents?(Uh(1===(n=t.query).documents.length),e=sp(Zf(Dd(n.documents[0])))):e=sp(jd(t.query)),new Fg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ef.fromBase64String(t.resumeToken))}function Hg(t,e){var n,r=Bg(e.snapshotVersion),i=Bg(e.lastLimboFreeSnapshotVersion);n=Lf(e.target)?Ud(t.Lt,e.target):Vd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new hg(e.targetId,Of(e.target),r,o,e.sequenceNumber,i,n)}function Wg(t){var e=jd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ap(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return $g(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:zg(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return $g(t).put({bundleId:(n=e).id,createTime:Bg(Ad(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Xg(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Wg(e.bundledQuery),readTime:zg(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Xg(t).put({name:(n=e).name,readTime:Bg(Ad(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function $g(t){return Og(t,vg.store)}function Xg(t){return Og(t,yg.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yg=function(){function t(){this.Bt=new Jg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Eg.resolve()},t.prototype.getCollectionParents=function(t,e){return Eg.resolve(this.Bt.getEntries(e))},t}(),Jg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new td(Yh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new td(Yh.comparator)).toArray()},t}(),Zg=function(){function t(){this.qt=new Jg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Jd(i)};return tv(t).put(o)}return Eg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Kh(e),""],!1,!0);return tv(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(eg(o.parent))}return n}))},t}();function tv(t){return Og(t,dg.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nv=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e,n){var r=t.store(og.store),i=t.store(sg.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Uh(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=sg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Eg.waitFor(o).next((function(){return c}))}function iv(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mh();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nv.DEFAULT_COLLECTION_PERCENTILE=10,nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nv.DEFAULT=new nv(41943040,nv.DEFAULT_COLLECTION_PERCENTILE,nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nv.DISABLED=new nv(-1,0,0);var ov=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Uh(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return av(t).$t({index:og.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=uv(t),s=av(t);return s.add({}).next((function(a){Uh("number"==typeof a);for(var u=new Pg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Fd(t.Lt,e)})),i=n.mutations.map((function(e){return Fd(t.Lt,e)}));return new og(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new td((function(t,e){return Bh(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],g=sg.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,sg.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Eg.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return av(t).get(e).next((function(t){return t?(Uh(t.userId===n.userId),Kg(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Eg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return av(t).$t({index:og.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Uh(e.batchId>=r),o=Kg(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return av(t).$t({index:og.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return av(t).Nt(og.userMutationsIndex,n).next((function(t){return t.map((function(t){return Kg(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=sg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uv(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=eg(u);if(a===n.userId&&e.path.isEqual(l))return av(t).get(c).next((function(t){if(!t)throw Mh();Uh(t.userId===n.userId),o.push(Kg(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new td(Bh),i=[];return e.forEach((function(e){var o=sg.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=uv(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=eg(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Eg.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=sg.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new td(Bh);return uv(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=eg(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(av(t).get(e).next((function(t){if(null===t)throw Mh();Uh(t.userId===n.userId),r.push(Kg(n.R,t))})))})),Eg.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return rv(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Eg.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Eg.resolve();var r=IDBKeyRange.lowerBound(sg.prefixForUser(e.userId)),i=[];return uv(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=eg(t[1]);i.push(o)}else r.done()})).next((function(){Uh(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return sv(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return cv(t).get(this.userId).next((function(t){return t||new ig(e.userId,-1,"")}))},t}();function sv(t,e,n){var r=sg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return uv(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function av(t){return Og(t,og.store)}function uv(t){return Og(t,sg.store)}function cv(t){return Og(t,ig.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lv=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),hv=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new lv(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Hh.fromTimestamp(new Gh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return fv(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Uh(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return fv(t).$t((function(s,a){var u=Gg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Eg.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return fv(t).$t((function(t,n){var r=Gg(n);e(r)}))},t.prototype.Xt=function(t){return pv(t).get(pg.key).next((function(t){return Uh(null!==t),t}))},t.prototype.Zt=function(t,e){return pv(t).put(pg.key,e)},t.prototype.te=function(t,e){return fv(t).put(Hg(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Of(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fv(t).$t({range:r,index:hg.queryTargetsIndexName},(function(t,n,r){var o=Gg(n);Pf(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=dv(t);return e.forEach((function(e){var s=Jd(e.path);i.push(o.put(new fg(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Eg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=dv(t);return Eg.forEach(e,(function(e){var o=Jd(e.path);return Eg.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=dv(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=dv(t),i=ud();return r.$t({range:n,kt:!0},(function(t,e,n){var r=eg(t[1]),o=new pf(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Jd(e.path),r=IDBKeyRange.bound([n],[Kh(n)],!1,!0),i=0;return dv(t).$t({index:fg.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return fv(t).get(e).next((function(t){return t?Gg(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){return Og(t,hg.store)}function pv(t){return Og(t,pg.store)}function dv(t){return Og(t,fg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){if(t.code!==xh.FAILED_PRECONDITION||t.message!==bg)throw t;return Oh("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Bh(n,i);return 0===s?Bh(r,o):s}var yv=function(){function t(t){this.ne=t,this.buffer=new td(vv),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();vv(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),mv=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Oh("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return zi(e,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Cg(e=n.sent())?(Oh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,gv(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),bv=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Eg.resolve(kh.o);var r=new yv(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Oh("LruGarbageCollector","Garbage collection skipped; disabled"),Eg.resolve(ev)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Oh("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ev):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Oh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Dh()<=po.DEBUG&&Oh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Eg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),wv=function(){function t(t,e){this.db=t,this.garbageCollector=new bv(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return _v(t,n)},t.prototype.removeReference=function(t,e,n){return _v(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return _v(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,cv(n=t).Ot((function(t){return sv(n,t,r).next((function(t){return t&&(i=!0),Eg.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),dv(t).delete([0,Jd(s.path)])}))}));i.push(u)}})).next((function(){return Eg.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return _v(t,e)},t.prototype.we=function(t,e){var n,r=dv(t),i=kh.o;return r.$t({index:fg.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==kh.o&&e(new pf(eg(n)),i),i=a,n=s):i=kh.o})).next((function(){i!==kh.o&&e(new pf(eg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function _v(t,e){return dv(t).put((n=e,r=t.currentSequenceNumber,new fg(0,Jd(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ev=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qh(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return $h(this.inner)},t}(),Tv=function(){function t(){this.changes=new Ev((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Hh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Rf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Eg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Iv=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Cv(t).put(kv(e),n)},t.prototype.removeEntry=function(t,e){var n=Cv(t),r=kv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Cv(t).get(kv(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Cv(t).get(kv(e)).next((function(t){return{document:n.ye(e,t),size:iv(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=rd();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=rd(),i=new Yp(pf.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,iv(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Eg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Cv(t).$t({range:r},(function(t,e,r){for(var s=pf.fromSegments(t);o&&pf.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=rd(),o=e.path.length+1,s={};if(n.isEqual(Hh.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=jg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=cg.collectionReadTimeIndex}return Cv(t).$t(s,(function(t,n,s){if(t.length===o){var a=Ug(r.R,n);e.path.isPrefixOf(a.key.path)?hp(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Sv(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Av(t).get(lg.key).next((function(t){return Uh(!!t),t}))},t.prototype.me=function(t,e){return Av(t).put(lg.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ug(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Hh.min()))return n}return Rf.newInvalidDocument(t)},t}(),Sv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ev((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return qi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new td((function(t,e){return Bh(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Vg(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=iv(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Vg(e.Ie.R,Rf.newNoDocument(o,Hh.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Eg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Tv);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){return Og(t,lg.store)}function Cv(t){return Og(t,cg.store)}function kv(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xv=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Uh(n<r&&n>=0&&r<=11);var o=new Tg("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(rg.store),function(t){t.createObjectStore(ig.store,{keyPath:ig.keyPath}),t.createObjectStore(og.store,{keyPath:og.keyPath,autoIncrement:!0}).createIndex(og.userMutationsIndex,og.userMutationsKeyPath,{unique:!0}),t.createObjectStore(sg.store)}(t),Rv(t),function(t){t.createObjectStore(cg.store)}(t));var s=Eg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fg.store),t.deleteObjectStore(hg.store),t.deleteObjectStore(pg.store)}(t),Rv(t)),s=s.next((function(){return function(t){var e=t.store(pg.store),n=new pg(0,0,Hh.min().toTimestamp(),0);return e.put(pg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(og.store).Nt().next((function(n){t.deleteObjectStore(og.store),t.createObjectStore(og.store,{keyPath:og.keyPath,autoIncrement:!0}).createIndex(og.userMutationsIndex,og.userMutationsKeyPath,{unique:!0});var r=e.store(og.store),i=n.map((function(t){return r.put(t)}));return Eg.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(gg.store,{keyPath:gg.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(lg.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(cg.store);e.createIndex(cg.readTimeIndex,cg.readTimeIndexPath,{unique:!1}),e.createIndex(cg.collectionReadTimeIndex,cg.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(vg.store,{keyPath:vg.keyPath})}(t),function(t){t.createObjectStore(yg.store,{keyPath:yg.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(cg.store).$t((function(t,n){e+=iv(n)})).next((function(){var n=new lg(e);return t.store(lg.store).put(lg.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ig.store),r=t.store(og.store);return n.Nt().next((function(n){return Eg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(og.userMutationsIndex,i).next((function(r){return Eg.forEach(r,(function(r){Uh(r.userId===n.userId);var i=Kg(e.R,r);return rv(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(fg.store),n=t.store(cg.store);return t.store(pg.store).get(pg.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Yh(n),s=[0,Jd(o)];r.push(e.get(s).next((function(n){return n?Eg.resolve():(r=o,e.put(new fg(0,Jd(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Eg.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(dg.store,{keyPath:dg.keyPath});var n=e.store(dg.store),r=new Jg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Jd(i)})}};return e.store(cg.store).$t({kt:!0},(function(t,e){var n=new Yh(t);return i(n.popLast())})).next((function(){return e.store(sg.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=eg(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(hg.store);return n.$t((function(t,r){var i=Gg(r),o=Hg(e.R,i);return n.put(o)}))},t}();function Rv(t){t.createObjectStore(fg.store,{keyPath:fg.keyPath}).createIndex(fg.documentTargetsIndex,fg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hg.store,{keyPath:hg.keyPath}).createIndex(hg.queryTargetsIndexName,hg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pg.store)}var Nv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dv=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Rh(xh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new wv(this,i),this.Le=n+"main",this.R=new Mg(u),this.Be=new Ig(this.Le,11,new xv(this.R)),this.qe=new hv(this.referenceDelegate,this.R),this.Ut=new Zg,this.Ue=(h=this.R,f=this.Ut,new Iv(h,f)),this.Ke=new Qg,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Ph("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Rh(xh.FAILED_PRECONDITION,Nv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new kh(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return zi(e,void 0,void 0,(function(){return Ki(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return zi(e,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return zi(e,void 0,void 0,(function(){return Ki(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Pv(e).put(new gg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Cg(e))return Oh("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Oh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Ov(t).get(rg.key).next((function(t){return Eg.resolve(e.tn(t))}))},t.prototype.en=function(t){return Pv(t).delete(this.clientId)},t.prototype.nn=function(){return zi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Ki(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Og(t,gg.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Eg.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Eg.resolve(!0):Ov(t).get(rg.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Rh(xh.FAILED_PRECONDITION,Nv);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pv(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Oh("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return zi(this,void 0,void 0,(function(){var t=this;return Ki(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[rg.store,gg.store],(function(e){var n=new Dg(e,kh.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Pv(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ov.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Oh("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,mg,(function(o){return i=new Dg(o,r.Ne?r.Ne.next():kh.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Ph("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Rh(xh.FAILED_PRECONDITION,bg);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Ov(t).get(rg.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Rh(xh.FAILED_PRECONDITION,Nv)}))},t.prototype.Ze=function(t){var e=new rg(this.clientId,this.allowTabSynchronization,Date.now());return Ov(t).put(rg.key,e)},t.yt=function(){return Ig.yt()},t.prototype.Xe=function(t){var e=this,n=Ov(t);return n.get(rg.key).next((function(t){return e.tn(t)?(Oh("IndexedDbPersistence","Releasing primary lease."),n.delete(rg.key)):Eg.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ph("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Oh("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Ph("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ph("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ov(t){return Og(t,rg.store)}function Pv(t){return Og(t,gg.store)}function Lv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fv=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,pf.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):ip(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new pf(e)).next((function(t){var e=od();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=od();return this.Ut.getCollectionParents(t,i).next((function(s){return Eg.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Yf(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Rf.newInvalidDocument(c),r=r.insert(c,l)),Lp(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){hp(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ud(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof jp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Mv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ud(),i=ud(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Uv=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Hh.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(tp(e)||ep(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(Dh()<=po.DEBUG&&Oh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lp(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new td(fp(t));return e.forEach((function(e,r){hp(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Dh()<=po.DEBUG&&Oh("QueryEngine","Using full collection scan to execute query:",lp(e)),this.Sn.getDocumentsMatchingQuery(t,e,Hh.min())},t}(),Vv=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Yp(Bh),this.kn=new Ev((function(t){return Of(t)}),Pf),this.$n=Hh.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Fv(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n,r){return new Vv(t,e,n,r)}function qv(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o;return Ki(this,(function(s){switch(s.label){case 0:return n=Vh(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Fv(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=ud(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var g=d[p];r.push(g.batchId);for(var v=0,y=g.mutations;v<y.length;v++){var m=y[v];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Bv(t,e){var n=Vh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=Eg.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Uh(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function zv(t){var e=Vh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Kv(t,e){var n=Vh(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,Uh((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=rd();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=ud();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=rd();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Hh.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Oh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Hh.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Eg.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Gv(t,e){var n=Vh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Hv(t,e){var n=Vh(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Eg.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Fg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Wv(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s;return Ki(this,(function(a){switch(a.label){case 0:r=Vh(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Cg(s=a.sent()))throw s;return Oh("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Qv(t,e,n){var r=Vh(t),i=Hh.min(),o=ud();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=sp(e),c=Vh(s),l=c.kn.get(u),void 0!==l?Eg.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Hh.min(),n?o:ud())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function $v(t,e){var n=Vh(t),r=Vh(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Xv(t){var e=Vh(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=Vh(n),s=rd(),a=jg(i),u=Cv(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:cg.readTimeIndex,range:c},(function(t,e){var n=Ug(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:qg(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Yv(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){return[2,(e=Vh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Cv(t),n=Hh.min(),e.$t({index:cg.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=qg(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Eg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ad(n.createTime)}),Eg.resolve()},t.prototype.getNamedQuery=function(t,e){return Eg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:Wg(n.bundledQuery),readTime:Ad(n.readTime)}),Eg.resolve();var n},t}(),Zv=function(){function t(){this.Wn=new td(ty.Gn),this.zn=new td(ty.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ty(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ty(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new pf(new Yh([])),r=new ty(n,t),i=new ty(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new pf(new Yh([])),n=new ty(e,t),r=new ty(e,t+1),i=ud();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ty(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ty=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return pf.comparator(t.key,e.key)||Bh(t.ns,e.ns)},t.Hn=function(t,e){return Bh(t.ns,e.ns)||pf.comparator(t.key,e.key)},t}(),ey=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new td(ty.Gn)}return t.prototype.checkEmpty=function(t){return Eg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Pg(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new ty(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Eg.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Eg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Eg.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Eg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Eg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ty(e,0),i=new ty(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Eg.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new td(Bh);return e.forEach((function(t){var e=new ty(t,0),i=new ty(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Eg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;pf.isDocumentKey(i)||(i=i.child(""));var o=new ty(new pf(i),0),s=new td(Bh);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Eg.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Uh(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Eg.forEach(e.mutations,(function(i){var o=new ty(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ty(e,0),r=this.rs.firstAfterOrEqual(n);return Eg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Eg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ny=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Yp(pf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Eg.resolve(n?n.document.clone():Rf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=rd();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Rf.newInvalidDocument(t))})),Eg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=rd(),i=new pf(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||hp(e,c)&&(r=r.insert(c.key,c.clone()))}return Eg.resolve(r)},t.prototype.fs=function(t,e){return Eg.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ry(this)},t.prototype.getSize=function(t){return Eg.resolve(this.size)},t}(),ry=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return qi(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Eg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Tv),iy=function(){function t(t){this.persistence=t,this.ds=new Ev((function(t){return Of(t)}),Pf),this.lastRemoteSnapshotVersion=Hh.min(),this.highestTargetId=0,this.ws=0,this._s=new Zv,this.targetCount=0,this.ys=lv.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Eg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Eg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Eg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Eg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Eg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new lv(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Eg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Eg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Eg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Eg.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Eg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Eg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Eg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Eg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Eg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Eg.resolve(n)},t.prototype.containsKey=function(t,e){return Eg.resolve(this._s.containsKey(e))},t}(),oy=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new kh(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new iy(this),this.Ut=new Yg,this.Ue=(n=this.Ut,new ny(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new Mg(e),this.Ke=new Jv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ey(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Oh("MemoryPersistence","Starting transaction:",t);var i=new sy(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Eg.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),sy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return qi(e,t),e}(wg),ay=function(){function t(t){this.persistence=t,this.As=new Zv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mh()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Eg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Eg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Eg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Eg.forEach(this.vs,(function(r){var i=pf.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Eg.or([function(){return Eg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),uy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){return"firestore_clients_"+t+"_"+e}function ly(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function hy(t,e){return"firestore_targets_"+t+"_"+e}uy.UNAUTHENTICATED=new uy(null),uy.GOOGLE_CREDENTIALS=new uy("google-credentials-uid"),uy.FIRST_PARTY=new uy("first-party-uid");var fy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Rh(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ph("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),py=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Rh(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ph("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),dy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ld(),s=0;i&&s<r.activeTargetIds.length;++s)i=ff(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ph("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),gy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ph("SharedClientState","Failed to parse online state: "+e),null)},t}(),vy=function(){function t(){this.activeTargetIds=ld()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),yy=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Yp(Bh),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=cy(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new vy),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return zi(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Ki(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(cy(this.persistenceKey,r)))&&(o=dy.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(hy(this.persistenceKey,t));if(n){var r=py.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(hy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Oh("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Oh("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Oh("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Oh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ph("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return zi(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Ki(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=kh.o;if(null!=t)try{var n=JSON.parse(t);Uh("number"==typeof n),e=n}catch(r){Ph("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==kh.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new fy(this.currentUser,t,e,n),i=ly(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ly(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=hy(this.persistenceKey,t),i=new py(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return dy.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return fy.Vs(new uy(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return py.Vs(r,e)},t.prototype.js=function(t){return gy.Vs(t)},t.prototype.ii=function(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Oh("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ld();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),my=function(){function t(){this.li=new vy,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),by=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),wy=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Oh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Oh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),_y={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ey=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ty=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return qi(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Ch;s.listenOnce(_h.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case wh.NO_ERROR:var e=s.getResponseJson();Oh("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wh.TIMEOUT:Oh("Connection",'RPC "'+t+'" timed out'),o(new Rh(xh.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:var n=s.getStatus();if(Oh("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(xh).indexOf(c)>=0?c:xh.UNKNOWN);o(new Rh(a,r.message))}else o(new Rh(xh.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Rh(xh.UNAVAILABLE,"Connection failed."));break;default:Mh()}}finally{Oh("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new gh,s=uc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Sh({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yi())||"object"==typeof navigator&&"ReactNative"===navigator.product||Yi().indexOf("Electron/")>=0||((r=Yi()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||Yi().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");Oh("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new Ey({Ei:function(t){h?Oh("Connection","Not sending because WebChannel is closed:",t):(l||(Oh("Connection","Opening WebChannel transport."),c.open(),l=!0),Oh("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,Ah.EventType.OPEN,(function(){h||Oh("Connection","WebChannel transport opened.")})),p(c,Ah.EventType.CLOSE,(function(){h||(h=!0,Oh("Connection","WebChannel transport closed"),f.Vi())})),p(c,Ah.EventType.ERROR,(function(t){h||(h=!0,Lh("Connection","WebChannel transport errored:",t),f.Vi(new Rh(xh.UNAVAILABLE,"The operation could not be completed")))})),p(c,Ah.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Uh(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Oh("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Kp[t];if(void 0!==e)return Xp(e)}(o),a=i.message;void 0===s&&(s=xh.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new Rh(s,a)),c.close()}else Oh("Connection","WebChannel received:",n),f.Si(n)}})),p(s,Eh.STAT_EVENT,(function(t){t.stat===Th?Oh("Connection","Detected buffering proxy"):t.stat===Ih&&Oh("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Oh("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Oh("RestConnection","Received: ",t),t}),(function(e){throw Lh("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=_y[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(){return"undefined"!=typeof window?window:null}function Sy(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return new Ed(t,!0)}var Cy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Oh("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ky=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Cy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return zi(this,void 0,void 0,(function(){return Ki(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return zi(this,void 0,void 0,(function(){return Ki(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return zi(this,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===xh.RESOURCE_EXHAUSTED?(Ph(e.toString()),Ph("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===xh.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Rh(xh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return zi(t,void 0,void 0,(function(){return Ki(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Oh("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Oh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),xy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return qi(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Mh(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Uh(void 0===e||"string"==typeof e),ef.fromBase64String(e||"")):(Uh(void 0===e||e instanceof Uint8Array),ef.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?xh.UNKNOWN:Xp(t.code);return new Rh(e,t.message||"")}(u);n=new gd(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Rd(t,i.document.name),s=Ad(i.document.updateTime);var u=new kf({mapValue:{fields:i.document.fields}}),c=(a=Rf.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new pd(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Rd(t,i.document),s=i.readTime?Ad(i.readTime):Hh.min(),u=Rf.newNoDocument(o,s),a=i.removedTargetIds||[],n=new pd([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Rd(t,i.document),s=i.removedTargetIds||[],n=new pd([],s,o,null);else{if(!("filter"in e))return Mh();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new Qp(i),s=h.targetId,n=new dd(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Hh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Hh.min():e.readTime?Ad(e.readTime):Hh.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=Od(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=Lf(i)?{documents:Ud(e,i)}:{query:Vd(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Id(e,n.resumeToken):n.snapshotVersion.compareTo(Hh.min())>0&&(r.readTime=Td(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mh()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=Od(this.R),e.removeTarget=t,this.cr(e)},e}(ky),Ry=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return qi(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Uh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(Uh(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Ad(e.updateTime):Ad(n)).isEqual(Hh.min())&&(r=Ad(n)),new Rp(r,e.transformResults||[]);var e,n,r}))):[]),n=Ad(t.commitTime);return this.listener.Tr(n,e)}var r,i;return Uh(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Od(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Fd(e.R,t)}))};this.cr(n)},e}(ky),Ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return qi(e,t),e.prototype.br=function(){if(this.Rr)throw new Rh(xh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===xh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Rh(xh.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===xh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Rh(xh.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Dy=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ph(e),this.Vr=!1):Oh("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Oy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return zi(o,void 0,void 0,(function(){return Ki(this,(function(t){switch(t.label){case 0:return By(this)?(Oh("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return(e=Vh(t)).Or.add(4),[4,Ly(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Py(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Dy(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){return zi(this,void 0,void 0,(function(){var e,n;return Ki(this,(function(r){switch(r.label){case 0:if(!By(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ly(t){return zi(this,void 0,void 0,(function(){var e,n;return Ki(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Fy(t,e){var n=Vh(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),qy(n)?jy(n):rm(n).er()&&Uy(n,e))}function My(t,e){var n=Vh(t),r=rm(n);n.$r.delete(e),r.er()&&Vy(n,e),0===n.$r.size&&(r.er()?r.ir():By(n)&&n.Br.set("Unknown"))}function Uy(t,e){t.qr.U(e.targetId),rm(t).mr(e)}function Vy(t,e){t.qr.U(e),rm(t).yr(e)}function jy(t){t.qr=new yd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),rm(t).start(),t.Br.Sr()}function qy(t){return By(t)&&!rm(t).tr()&&t.$r.size>0}function By(t){return 0===Vh(t).Or.size}function zy(t){t.qr=void 0}function Ky(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){return t.$r.forEach((function(e,n){Uy(t,e)})),[2]}))}))}function Gy(t,e){return zi(this,void 0,void 0,(function(){return Ki(this,(function(n){return zy(t),qy(t)?(t.Br.Nr(e),jy(t)):t.Br.set("Unknown"),[2]}))}))}function Hy(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o;return Ki(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof gd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o;return Ki(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Oh("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Wy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pd?t.qr.X(e):e instanceof dd?t.qr.rt(e):t.qr.et(e),n.isEqual(Hh.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,zv(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(ef.EMPTY_BYTE_STRING,e.snapshotVersion)),Vy(a,t);var n=new Fg(e.target,t,1,e.sequenceNumber);Uy(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Oh("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Wy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function Wy(t,e,n){return zi(this,void 0,void 0,(function(){var r=this;return Ki(this,(function(i){switch(i.label){case 0:if(!Cg(e))throw e;return t.Or.add(1),[4,Ly(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return zv(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return zi(r,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return Oh("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Py(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Qy(t,e){return e().catch((function(n){return Wy(t,n,e)}))}function $y(t){return zi(this,void 0,void 0,(function(){var e,n,r,i,o;return Ki(this,(function(s){switch(s.label){case 0:e=Vh(t),n=im(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(By(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Gv(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=im(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Wy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Xy(e)&&Yy(e),[2]}var a}))}))}function Xy(t){return By(t)&&!im(t).tr()&&t.kr.length>0}function Yy(t){im(t).start()}function Jy(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){return im(t).Ar(),[2]}))}))}function Zy(t){return zi(this,void 0,void 0,(function(){var e,n,r,i;return Ki(this,(function(o){for(e=im(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function tm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i;return Ki(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Lg.from(r,e,n),[4,Qy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,$y(t)];case 2:return o.sent(),[2]}}))}))}function em(t,e){return zi(this,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return e&&im(t).pr?[4,function(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:return $p(r=e.code)&&r!==xh.ABORTED?(n=t.kr.shift(),im(t).sr(),[4,Qy(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,$y(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xy(t)&&Yy(t),[2]}}))}))}function nm(t,e){return zi(this,void 0,void 0,(function(){var n;return Ki(this,(function(r){switch(r.label){case 0:return n=Vh(t),e?(n.Or.delete(2),[4,Py(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ly(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rm(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:Ky.bind(null,t),Ri:Gy.bind(null,t),_r:Hy.bind(null,t)},(i=Vh(e)).br(),new xy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return zi(o,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),qy(t)?jy(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),zy(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function im(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:Jy.bind(null,t),Ri:em.bind(null,t),Ir:Zy.bind(null,t),Tr:tm.bind(null,t)},(i=Vh(e)).br(),new Ry(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return zi(o,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,$y(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(Oh("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var om=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _g,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rh(xh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function sm(t,e){if(Ph("AsyncQueue",e+": "+t),Cg(t))return new Rh(xh.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var am=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||pf.comparator(e.key,n.key)}:function(t,e){return pf.comparator(t.key,e.key)},this.keyedMap=od(),this.sortedSet=new Yp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),um=function(){function t(){this.Qr=new Yp(pf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Mh():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),cm=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,am.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&up(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),lm=function(){this.Wr=void 0,this.listeners=[]},hm=function(){this.queries=new Ev((function(t){return cp(t)}),up),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ki(this,(function(c){switch(c.label){case 0:if(n=Vh(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new lm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=sm(a,"Initialization of query '"+lp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vm(n),[2]}}))}))}function pm(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s;return Ki(this,(function(a){return n=Vh(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function dm(t,e){for(var n=Vh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&vm(n)}function gm(t,e,n){var r=Vh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vm(t){t.Gr.forEach((function(t){t.next()}))}var ym=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new cm(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=cm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),mm=function(t){this.key=t},bm=function(t){this.key=t},wm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ud(),this.mutatedKeys=ud(),this.lo=fp(t),this.fo=new am(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new um,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=tp(this.query)&&i.size===this.query.limit?i.last():null,c=ep(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=hp(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),tp(this.query)||ep(this.query))for(;s.size>this.query.limit;){var l=tp(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mh()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new cm(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new um,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ud(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new bm(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new mm(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ud();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return cm.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),_m=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Em=function(t){this.key=t,this.bo=!1},Tm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ev((function(t){return cp(t)}),up),this.Vo=new Map,this.So=new Set,this.Do=new Yp(pf.comparator),this.Co=new Map,this.No=new Zv,this.xo={},this.Fo=new Map,this.ko=lv.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Ki(this,(function(u){switch(u.label){case 0:return n=Zm(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Hv(n.localStore,sp(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Sm(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Fy(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Sm(t,e,n,r){return zi(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Ki(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return zi(this,void 0,void 0,(function(){var i,o,s;return Ki(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Qv(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Um(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Qv(t.localStore,e,!0)];case 1:return i=l.sent(),o=new wm(e,i.Bn),s=o._o(i.documents),a=fd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Um(t,n,u.To),c=new _m(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Am(t,e){return zi(this,void 0,void 0,(function(){var n,r,i;return Ki(this,(function(o){switch(o.label){case 0:return n=Vh(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!up(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Wv(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),My(n.remoteStore,r.targetId),Fm(n,r.targetId)})).catch(gv)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Fm(n,r.targetId),[4,Wv(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Cm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s;return Ki(this,(function(a){switch(a.label){case 0:r=tb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=Vh(u),f=Gh.now(),p=c.reduce((function(t,e){return t.add(e.key)}),ud()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Fp(o,l.get(o.key));null!=s&&n.push(new jp(o.key,s,xf(s.value.mapValue),Np.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Yp(Bh)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,qm(r,i.changes)];case 3:return a.sent(),[4,$y(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function km(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:n=Vh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Kv(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Uh(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Uh(r.bo):t.removedDocuments.size>0&&(Uh(r.bo),r.bo=!1))})),[4,qm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,gv(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function xm(t,e,n){var r=Vh(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Vh(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&vm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Ki(this,(function(c){switch(c.label){case 0:return(r=Vh(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Yp(pf.comparator)).insert(o,Rf.newNoDocument(o,Hh.min())),a=ud().add(o),u=new hd(Hh.min(),new Map,new td(Bh),s,a),[4,km(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),jm(r),[3,4];case 2:return[4,Wv(r.localStore,e,!1).then((function(){return Fm(r,e,n)})).catch(gv)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Nm(t,e){return zi(this,void 0,void 0,(function(){var n,r,i;return Ki(this,(function(o){switch(o.label){case 0:n=Vh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Bv(n.localStore,e)];case 2:return i=o.sent(),Lm(n,r,null),Pm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,qm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,gv(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Dm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i;return Ki(this,(function(o){switch(o.label){case 0:r=Vh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=Vh(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return Uh(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),Lm(r,e,n),Pm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,qm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,gv(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function Om(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s;return Ki(this,(function(a){switch(a.label){case 0:By((n=Vh(t)).remoteStore)||Oh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=Vh(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=sm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function Pm(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Lm(t,e,n){var r=Vh(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Fm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Mm(t,e)}))}function Mm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(My(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),jm(t))}function Um(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof mm?(t.No.addReference(o.key,e),Vm(t,o)):o instanceof bm?(Oh("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Mm(t,o.key)):Mh()}}function Vm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Oh("SyncEngine","New document in limbo: "+n),t.So.add(r),jm(t))}function jm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new pf(Yh.fromString(e)),r=t.ko.next();t.Co.set(r,new Em(n)),t.Do=t.Do.insert(n,r),Fy(t.remoteStore,new Fg(sp(Zf(n.path)),r,2,kh.o))}}function qm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s;return Ki(this,(function(a){switch(a.label){case 0:return r=Vh(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Mv.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ki(this,(function(h){switch(h.label){case 0:n=Vh(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Eg.forEach(e,(function(e){return Eg.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Eg.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Cg(r=h.sent()))throw r;return Oh("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Bm(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:return(n=Vh(t)).currentUser.isEqual(e)?[3,3]:(Oh("SyncEngine","User change. New user:",e.toKey()),[4,qv(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Rh(xh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,qm(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function zm(t,e){var n=Vh(t),r=n.Co.get(e);if(r&&r.bo)return ud().add(r.key);var i=ud(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Km(t,e){return zi(this,void 0,void 0,(function(){var n,r,i;return Ki(this,(function(o){switch(o.label){case 0:return[4,Qv((n=Vh(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Um(n,e.targetId,i.To),i)]}}))}))}function Gm(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){return[2,Xv((e=Vh(t)).localStore).then((function(t){return qm(e,t)}))]}))}))}function Hm(t,e,n,r){return zi(this,void 0,void 0,(function(){var i,o;return Ki(this,(function(s){switch(s.label){case 0:return[4,(a=(i=Vh(t)).localStore,u=e,c=Vh(a),l=Vh(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):Eg.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,$y(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Lm(i,e,r||null),Pm(i,e),function(t,e){Vh(Vh(t)._n).Gt(e)}(i.localStore,e)):Mh(),s.label=4;case 4:return[4,qm(i,o)];case 5:return s.sent(),[3,7];case 6:Oh("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function Wm(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Ki(this,(function(l){switch(l.label){case 0:return Zm(n=Vh(t)),tb(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Qm(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,nm(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],Fy(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Fm(n,e),Wv(n.localStore,e,!0)})),My(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Qm(n,u)];case 5:return l.sent(),(h=Vh(n)).Co.forEach((function(t,e){My(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Yp(pf.comparator),n.$o=!1,[4,nm(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function Qm(t,e,n){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,g;return Ki(this,(function(v){switch(v.label){case 0:n=Vh(t),r=[],i=[],o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Hv(n.localStore,sp(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,Km(n,p)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,$v(n.localStore,a)];case 8:return g=v.sent(),[4,Hv(n.localStore,g)];case 9:return u=v.sent(),[4,Sm(n,$m(g),a,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function $m(t){return Jf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Xm(t){var e=Vh(t);return Vh(Vh(e.localStore).persistence).fn()}function Ym(t,e,n,r){return zi(this,void 0,void 0,(function(){var i,o,s;return Ki(this,(function(a){switch(a.label){case 0:return(i=Vh(t)).$o?(Oh("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xv(i.localStore)];case 3:return o=a.sent(),s=hd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,qm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Wv(i.localStore,e,!0)];case 6:return a.sent(),Fm(i,e,r),[3,8];case 7:Mh(),a.label=8;case 8:return[2]}}))}))}function Jm(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Ki(this,(function(p){switch(p.label){case 0:if(!(r=Zm(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Oh("SyncEngine","Adding an already active target "+s),[3,5]):[4,$v(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Hv(r.localStore,a)];case 3:return u=p.sent(),[4,Sm(r,$m(a),u.targetId,!1)];case 4:p.sent(),Fy(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Ki(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Wv(r.localStore,t,!1).then((function(){My(r.remoteStore,t),Fm(r,t)})).catch(gv)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Zm(t){var e=Vh(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=km.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rm.bind(null,e),e.vo._r=dm.bind(null,e.eventManager),e.vo.Mo=gm.bind(null,e.eventManager),e}function tb(t){var e=Vh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}var eb=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return this.R=Ay(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return jv(this.persistence,new Uv,t.initialUser,this.R)},t.prototype.qo=function(t){return new oy(ay.bs,this.R)},t.prototype.Bo=function(t){return new my},t.prototype.terminate=function(){return zi(this,void 0,void 0,(function(){return Ki(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return qi(e,t),e.prototype.initialize=function(e){return zi(this,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Yv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,tb(this.Qo.syncEngine)];case 4:return n.sent(),[4,$y(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return jv(this.persistence,new Uv,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new mv(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Lv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nv.withCacheSize(this.cacheSizeBytes):nv.DEFAULT;return new Dv(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Iy(),Sy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new my},e}(eb),rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return qi(e,t),e.prototype.initialize=function(e){return zi(this,void 0,void 0,(function(){var n,r=this;return Ki(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof yy?(this.sharedClientState.syncEngine={ui:Hm.bind(null,n),ai:Ym.bind(null,n),hi:Jm.bind(null,n),fn:Xm.bind(null,n),ci:Gm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return zi(r,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return[4,Wm(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Iy();if(!yy.yt(e))throw new Rh(xh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Lv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new yy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(nb),ib=function(){function t(){}return t.prototype.initialize=function(t,e){return zi(this,void 0,void 0,(function(){var n=this;return Ki(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return xm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Bm.bind(null,this.syncEngine),[4,nm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new hm},t.prototype.createDatastore=function(t){var e,n,r=Ay(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new Ty(e));return n=t.credentials,new Ny(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return xm(s.syncEngine,t,0)},o=wy.yt()?new wy:new by,new Oy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new Tm(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return e=Vh(t),Oh("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ly(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),ob=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),sb=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return zi(this,void 0,void 0,(function(){var e,n=this;return Ki(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Rh(xh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return zi(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Ki(this,(function(u){switch(u.label){case 0:return n=Vh(t),r=Od(n.R)+"/documents",i={documents:e.map((function(t){return xd(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){Uh(!!e.found),e.found.name,e.found.updateTime;var n=Rd(t,e.found.name),r=Ad(e.found.updateTime),i=new kf({mapValue:{fields:e.found.fields}});return Rf.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){Uh(!!e.missing),Uh(!!e.readTime);var n=Rd(t,e.missing),r=Ad(e.readTime);return Rf.newNoDocument(n,r)}(e,r):Mh());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Uh(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Hp(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return zi(this,void 0,void 0,(function(){var t,e=this;return Ki(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=pf.fromPath(n);e.mutations.push(new Wp(r,e.precondition(r)))})),[4,function(t,e){return zi(this,void 0,void 0,(function(){var n,r,i;return Ki(this,(function(o){switch(o.label){case 0:return n=Vh(t),r=Od(n.R)+"/documents",i={writes:e.map((function(t){return Fd(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mh();e=Hh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Rh(xh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Np.updateTime(e):Np.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Hh.min()))throw new Rh(xh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Np.updateTime(e)}return Np.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ab=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Cy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return zi(t,void 0,void 0,(function(){var t,e,n=this;return Ki(this,(function(r){return t=new sb(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!lf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$p(e)}return!1},t}(),ub=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=uy.UNAUTHENTICATED,this.clientId=qh.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return zi(r,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return Oh("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return zi(this,void 0,void 0,(function(){return Ki(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Rh(xh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new _g;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return zi(t,void 0,void 0,(function(){var t,n;return Ki(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=sm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function cb(t,e){return zi(this,void 0,void 0,(function(){var n,r,i=this;return Ki(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Oh("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return zi(i,void 0,void 0,(function(){return Ki(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,qv(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function lb(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,hb(t)];case 1:return n=i.sent(),Oh("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return zi(this,void 0,void 0,(function(){var n,r;return Ki(this,(function(i){switch(i.label){case 0:return(n=Vh(t)).asyncQueue.verifyOperationInProgress(),Oh("RemoteStore","RemoteStore received new credentials"),r=By(n),n.Or.add(3),[4,Ly(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Py(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function hb(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Oh("FirestoreClient","Using default OfflineComponentProvider"),[4,cb(t,new eb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function fb(t){return zi(this,void 0,void 0,(function(){return Ki(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Oh("FirestoreClient","Using default OnlineComponentProvider"),[4,lb(t,new ib)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function pb(t){return hb(t).then((function(t){return t.persistence}))}function db(t){return hb(t).then((function(t){return t.localStore}))}function gb(t){return fb(t).then((function(t){return t.remoteStore}))}function vb(t){return fb(t).then((function(t){return t.syncEngine}))}function yb(t){return zi(this,void 0,void 0,(function(){var e,n;return Ki(this,(function(r){switch(r.label){case 0:return[4,fb(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Im.bind(null,e.syncEngine),n.onUnlisten=Am.bind(null,e.syncEngine),n)]}}))}))}function mb(t,e,n){var r=this;void 0===n&&(n={});var i=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(r,void 0,void 0,(function(){var r;return Ki(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ob({next:function(o){e.enqueueAndForget((function(){return pm(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Rh(xh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Rh(xh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ym(Zf(n.path),o,{includeMetadataChanges:!0,so:!0});return fm(t,s)},[4,yb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function bb(t,e,n){var r=this;void 0===n&&(n={});var i=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(r,void 0,void 0,(function(){var r;return Ki(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ob({next:function(n){e.enqueueAndForget((function(){return pm(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Rh(xh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ym(n,o,{includeMetadataChanges:!0,so:!0});return fm(t,s)},[4,yb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var wb=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},_b=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Eb=new Map,Tb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ib=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(uy.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Sb=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ab=function(){function t(t){var e=this;this.currentUser=uy.UNAUTHENTICATED,this.oc=new _g,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Oh("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Oh("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Oh("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Uh("string"==typeof n.accessToken),new Tb(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return zi(n,void 0,void 0,(function(){return Ki(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Uh(null===t||"string"==typeof t),new uy(t)},t}(),Cb=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=uy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),kb=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Cb(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(uy.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e,n){if(!n)throw new Rh(xh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Rb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Rh(xh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Nb(t,e,n,r){if(!0===e&&!0===r)throw new Rh(xh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Db(t){if(!pf.isDocumentKey(t))throw new Rh(xh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ob(t){if(pf.isDocumentKey(t))throw new Rh(xh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Pb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mh()}function Lb(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Rh(xh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Pb(t);throw new Rh(xh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Fb(t,e){if(e<=0)throw new Rh(xh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Rh(xh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rh(xh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Nb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ub=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mb({}),this._settingsFrozen=!1,t instanceof _b?(this._databaseId=t,this._credentials=new Ib):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Rh(xh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _b(t.options.projectId)}(t),this._credentials=new Ab(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Rh(xh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Rh(xh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ib;switch(t.type){case"gapi":var e=t.client;return Uh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new kb(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Rh(xh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Eb.get(this))&&(Oh("ComponentProvider","Removing Datastore"),Eb.delete(this),t.terminate()),Promise.resolve();var t},t}(),Vb=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qb(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),jb=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),qb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zf(r))||this)._path=r,i.type="collection",i}return qi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Vb(this.firestore,null,new pf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(jb);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ao(t),xb("collection","path",e),t instanceof Ub)return Ob(n=Yh.fromString.apply(Yh,Wi([e],r))),new qb(t,null,n);if(!(t instanceof Vb||t instanceof qb))throw new Rh(xh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ob(n=Yh.fromString.apply(Yh,Wi([t.path],r)).child(Yh.fromString(e))),new qb(t.firestore,null,n)}function zb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ao(t),1===arguments.length&&(e=qh.u()),xb("doc","path",e),t instanceof Ub)return Db(n=Yh.fromString.apply(Yh,Wi([e],r))),new Vb(t,null,new pf(n));if(!(t instanceof Vb||t instanceof qb))throw new Rh(xh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Db(n=t._path.child(Yh.fromString.apply(Yh,Wi([e],r)))),new Vb(t.firestore,t instanceof qb?t.converter:null,new pf(n))}function Kb(t,e){return t=ao(t),e=ao(e),(t instanceof Vb||t instanceof qb)&&(e instanceof Vb||e instanceof qb)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Gb(t,e){return t=ao(t),e=ao(e),t instanceof jb&&e instanceof jb&&t.firestore===e.firestore&&up(t._query,e._query)&&t.converter===e.converter}var Hb=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Cy(this,"async_queue_retry"),this.Tc=function(){var e=Sy();e&&Oh("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Sy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Sy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return zi(this,void 0,void 0,(function(){var t,e=this;return Ki(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Cg(t=n.sent()))throw t;return Oh("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Ph("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=om.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Mh()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return zi(this,void 0,void 0,(function(){var t;return Ki(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Wb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Qb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Hb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return qi(e,t),e.prototype._terminate=function(){return this._firestoreClient||Xb(this),this._firestoreClient.terminate()},e}(Ub);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){return t._firestoreClient||Xb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xb(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new wb(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new ub(t._credentials,t._queue,a)}function Yb(t,e,n){var r=this,i=new _g;return t.asyncQueue.enqueue((function(){return zi(r,void 0,void 0,(function(){var r;return Ki(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,cb(t,n)];case 1:return o.sent(),[4,lb(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===xh.FAILED_PRECONDITION||s.code===xh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function Jb(t){if(t._initialized||t._terminated)throw new Rh(xh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Rh(xh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),tw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ef.fromBase64String(e))}catch(n){throw new Rh(xh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(ef.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ew=function(t){this._methodName=t},nw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Rh(xh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Rh(xh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Bh(this._lat,t._lat)||Bh(this._long,t._long)},t}(),rw=/^__.*__$/,iw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new jp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vp(t,this.data,e,this.fieldTransforms)},t}(),ow=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new jp(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mh()}}var aw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Cw(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(sw(this.Cc)&&rw.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),uw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ay(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new aw({Cc:t,methodName:e,Bc:n,path:Zh.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function cw(t){var e=t._freezeSettings(),n=Ay(t._databaseId);return new uw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Tw("Data must be an object, but it was:",s,r);var a,u,c=_w(r,s);if(o.merge)a=new tf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=Iw(e,f[h],n);if(!s.contains(p))throw new Rh(xh.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");kw(l,p)||l.push(p)}a=new tf(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new iw(new kf(c),a,u)}var hw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ew);function fw(t,e,n){return new aw({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype._toFieldTransform=function(t){return new xp(t.path,new _p)},e.prototype.isEqual=function(t){return t instanceof e},e}(ew),dw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return qi(e,t),e.prototype._toFieldTransform=function(t){var e=fw(this,t,!0),n=this.Uc.map((function(t){return ww(t,e)})),r=new Ep(n);return new xp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ew),gw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return qi(e,t),e.prototype._toFieldTransform=function(t){var e=fw(this,t,!0),n=this.Uc.map((function(t){return ww(t,e)})),r=new Ip(n);return new xp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ew),vw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return qi(e,t),e.prototype._toFieldTransform=function(t){var e=new Ap(t.R,vp(t.R,this.Kc));return new xp(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ew);function yw(t,e,n,r){var i=t.qc(1,e,n);Tw("Data must be an object, but it was:",i,r);var o=[],s=kf.empty();Qh(r,(function(t,r){var a=Aw(e,t,n);r=ao(r);var u=i.$c(a);if(r instanceof hw)o.push(a);else{var c=ww(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new tf(o);return new ow(s,a,i.fieldTransforms)}function mw(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Iw(e,r,n)],u=[i];if(o.length%2!=0)throw new Rh(xh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Iw(e,o[c])),u.push(o[c+1]);for(var l=[],h=kf.empty(),f=a.length-1;f>=0;--f)if(!kw(l,a[f])){var p=a[f],d=u[f];d=ao(d);var g=s.$c(p);if(d instanceof hw)l.push(p);else{var v=ww(d,g);null!=v&&(l.push(p),h.set(p,v))}}var y=new tf(l);return new ow(h,y,s.fieldTransforms)}function bw(t,e,n,r){return void 0===r&&(r=!1),ww(n,t.qc(r?4:3,e))}function ww(t,e){if(Ew(t=ao(t)))return Tw("Unsupported field value:",e,t),_w(t,e);if(t instanceof ew)return function(t,e){if(!sw(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ww(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=ao(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vp(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gh.fromDate(t);return{timestampValue:Td(e.R,n)}}if(t instanceof Gh)return n=new Gh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Td(e.R,n)};if(t instanceof nw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tw)return{bytesValue:Id(e.R,t._byteString)};if(t instanceof Vb){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Pb(t))}(t,e)}function _w(t,e){var n={};return $h(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qh(t,(function(t,r){var i=ww(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ew(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gh||t instanceof nw||t instanceof tw||t instanceof Vb||t instanceof ew)}function Tw(t,e,n){if(!Ew(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Pb(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}var i}function Iw(t,e,n){if((e=ao(e))instanceof Zb)return e._internalPath;if("string"==typeof e)return Aw(t,e);throw Cw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Sw=new RegExp("[~\\*/\\[\\]]");function Aw(t,e,n){if(e.search(Sw)>=0)throw Cw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zb.bind.apply(Zb,Wi([void 0],e.split(".")))))._internalPath}catch(C_){throw Cw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cw(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Rh(xh.INVALID_ARGUMENT,(a+=". ")+t+u)}function kw(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xw=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Vb(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Rw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Nw("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Rw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(xw);function Nw(t,e){return"string"==typeof e?Aw(t,e):e instanceof Zb?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dw=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ow=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return qi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Nw("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(xw),Pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ow),Lw=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Dw(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Pw(n._firestore,n._userDataWriter,r.key,r,new Dw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Rh(xh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Pw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Dw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Pw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Dw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Fw(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Fw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mh()}}function Mw(t,e){return t instanceof Ow&&e instanceof Ow?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Lw&&e instanceof Lw&&t._firestore===e._firestore&&Gb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){if(ep(t)&&0===t.explicitOrderBy.length)throw new Rh(xh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vw=function(){};function jw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var qw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return qi(e,t),e.prototype._apply=function(t){var e,n,r,i=cw(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Rh(xh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qw(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Ww(r,t,h))}a={arrayValue:{values:u}}}else a=Ww(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qw(s,o),a=bw(n,"where",s,"in"===o||"not-in"===o);var f=Ff.create(i,o,a);return function(t,e){if(e.g()){var n=rp(t);if(null!==n&&!n.isEqual(e.field))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=np(t);null!==r&&$w(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Rh(xh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Rh(xh.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new jb(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new Yf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(Vw),Bw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return qi(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Wf(e,n);return function(t,e){if(null===np(t)){var n=rp(t);null!==n&&$w(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new jb(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new Yf(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(Vw),zw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return qi(e,t),e.prototype._apply=function(t){return new jb(t.firestore,t.converter,ap(t._query,this.zc,this.Hc))},e}(Vw),Kw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return qi(e,t),e.prototype._apply=function(t){var e,n,r=Hw(t,this.type,this.Jc,this.Yc);return new jb(t.firestore,t.converter,(e=t._query,n=r,new Yf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(Vw),Gw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return qi(e,t),e.prototype._apply=function(t){var e,n,r=Hw(t,this.type,this.Jc,this.Yc);return new jb(t.firestore,t.converter,(e=t._query,n=r,new Yf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(Vw);function Hw(t,e,n,r){if(n[0]=ao(n[0]),n[0]instanceof xw)return function(t,e,n,r,i){if(!r)throw new Rh(xh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=op(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(_f(e,r.key));else{var c=r.data.field(u.field);if(af(c))throw new Rh(xh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Gf(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=cw(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Rh(xh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ip(t)&&-1!==c.indexOf("/"))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yh.fromString(c));if(!pf.isDocumentKey(l))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new pf(l);a.push(_f(e,h))}else{var f=bw(n,r,c);a.push(f)}}return new Gf(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ww(t,e,n){if("string"==typeof(n=ao(n))){if(""===n)throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ip(e)&&-1!==n.indexOf("/"))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yh.fromString(n));if(!pf.isDocumentKey(r))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return _f(t,new pf(r))}if(n instanceof Vb)return _f(t,n._key);throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Pb(n)+".")}function Qw(t,e){if(!Array.isArray(t)||0===t.length)throw new Rh(xh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Rh(xh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $w(t,e,n){if(!n.isEqual(e))throw new Rh(xh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),df(t)){case 0:return null;case 1:return t.booleanValue;case 2:return of(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(sf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mh()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Qh(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new nw(of(t.latitude),of(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=uf(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(cf(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=rf(t);return new Gh(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yh.fromString(t);Uh(Yd(n));var r=new _b(n.get(1),n.get(3)),i=new pf(n.popFirst(5));return r.isEqual(e)||Ph("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Jw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return qi(e,t),e.prototype.convertBytes=function(t){return new tw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Vb(this.firestore,null,e)},e}(Xw),Zw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=cw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=t_(t,this._firestore),i=Yw(r.converter,e,n),o=lw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Np.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=t_(t,this._firestore);return o="string"==typeof(e=ao(e))||e instanceof Zb?mw(this._dataReader,"WriteBatch.update",s._key,e,n,r):yw(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Np.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=t_(t,this._firestore);return this._mutations=this._mutations.concat(new Hp(e._key,Np.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Rh(xh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e){if((t=ao(t)).firestore!==e)throw new Rh(xh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return qi(e,t),e.prototype.convertBytes=function(t){return new tw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Vb(this.firestore,null,e)},e}(Xw);function n_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Lb(t,Vb);var o=Lb(t.firestore,Qb),s=cw(o);return i_(o,[("string"==typeof(e=ao(e))||e instanceof Zb?mw(s,"updateDoc",t._key,e,n,r):yw(s,"updateDoc",t._key,e)).toMutation(t._key,Np.exists(!0))])}function r_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=ao(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Wb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Wb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Vb)c=Lb(t.firestore,Qb),l=Zf(t._key.path),u={next:function(e){i[a]&&i[a](o_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Lb(t,jb);c=Lb(p.firestore,Qb),l=p._query;var d=new e_(c);u={next:function(t){i[a]&&i[a](new Lw(c,d,p,t))},error:i[a+1],complete:i[a+2]},Uw(t._query)}return function(t,e,n,r){var i=this,o=new ob(r),s=new ym(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return zi(i,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return e=fm,[4,yb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return zi(i,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return e=pm,[4,yb(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}($b(c),l,h,u)}function i_(t,e){return function(t,e){var n=this,r=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var n;return Ki(this,(function(i){switch(i.label){case 0:return n=Cm,[4,vb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}($b(t),e)}function o_(t,e,n){var r=n.docs.get(e._key),i=new e_(t);return new Ow(t,i,e._key,r,new Dw(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return qi(e,t),e.prototype.get=function(e){var n=this,r=t_(e,this._firestore),i=new e_(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Ow(n._firestore,i,r._key,t._document,new Dw(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=cw(t)}return t.prototype.get=function(t){var e=this,n=t_(t,this._firestore),r=new Jw(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Mh();var i=t[0];if(i.isFoundDocument())return new xw(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new xw(e._firestore,r,n._key,null,n.converter);throw Mh()}))},t.prototype.set=function(t,e,n){var r=t_(t,this._firestore),i=Yw(r.converter,e,n),o=lw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=t_(t,this._firestore);return o="string"==typeof(e=ao(e))||e instanceof Zb?mw(this._dataReader,"Transaction.update",s._key,e,n,r):yw(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=t_(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(){if("undefined"==typeof Uint8Array)throw new Rh(xh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function u_(){if("undefined"==typeof atob)throw new Rh(xh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var c_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return u_(),new t(tw.fromBase64String(e))},t.fromUint8Array=function(e){return a_(),new t(tw.fromUint8Array(e))},t.prototype.toBase64=function(){return u_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return a_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),l_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Jb(t=Lb(t,Qb));var n=$b(t),r=t._freezeSettings(),i=new ib;return Yb(n,i,new nb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Jb(t=Lb(t,Qb));var e=$b(t),n=t._freezeSettings(),r=new ib;return Yb(e,r,new rb(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Rh(xh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new _g;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return zi(e,void 0,void 0,(function(){var e;return Ki(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return Ig.yt()?(e=t+"main",[4,Ig.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Lv(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),h_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof _b||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Lh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Lb(t,Ub))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Lh("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Bi({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qi.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),Qi.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Rh(xh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Sb(new Tb(o,new uy(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return zi(e,void 0,void 0,(function(){var e,n;return Ki(this,(function(r){switch(r.label){case 0:return[4,pb(t)];case 1:return e=r.sent(),[4,gb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=Vh(i),o.Or.delete(0),Py(o))]}var i,o}))}))}))}($b(Lb(this._delegate,Qb)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return zi(e,void 0,void 0,(function(){var e,n;return Ki(this,(function(r){switch(r.label){case 0:return[4,pb(t)];case 1:return e=r.sent(),[4,gb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return zi(this,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return(e=Vh(t)).Or.add(0),[4,Ly(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}($b(Lb(this._delegate,Qb)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Nb("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(e,void 0,void 0,(function(){var e;return Ki(this,(function(r){switch(r.label){case 0:return e=Om,[4,vb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}($b(Lb(this._delegate,Qb)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new ob(e);return t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return e=function(t,e){Vh(t).Gr.add(e),e.next()},[4,yb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var e;return Ki(this,(function(n){switch(n.label){case 0:return e=function(t,e){Vh(t).Gr.delete(e)},[4,yb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}($b(e=Lb(e,Qb)),Wb(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Rh(xh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new S_(this,Bb(this._delegate,t))}catch(e){throw y_(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new v_(this,zb(this._delegate,t))}catch(e){throw y_(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new E_(this,function(t,e){if(t=Lb(t,Ub),xb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Rh(xh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new jb(t,null,(n=e,new Yf(Yh.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw y_(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var n;return Ki(this,(function(i){switch(i.label){case 0:return[4,(o=t,fb(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new ab(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}($b(e=this._delegate),(function(r){return function(e){return t(new p_(n,e))}(new s_(e,r))}))},t.prototype.batch=function(){var t=this;return $b(this._delegate),new d_(new Zw(this._delegate,(function(e){return i_(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Rh(xh.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Rh(xh.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),f_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return qi(e,t),e.prototype.convertBytes=function(t){return new c_(new tw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return v_.tu(e,this.firestore,null)},e}(Xw);var p_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new f_(t)}return t.prototype.get=function(t){var e=this,n=A_(t);return this._delegate.get(n).then((function(t){return new w_(e._firestore,new Ow(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=A_(t);return n?(Rb("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=A_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Wi([s,e,n],i)),this},t.prototype.delete=function(t){var e=A_(t);return this._delegate.delete(e),this},t}(),d_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=A_(t);return n?(Rb("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=A_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Wi([s,e,n],i)),this},t.prototype.delete=function(t){var e=A_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),g_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Pw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new __(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new f_(e),n),i.set(n,o)),o},t}();g_.nu=new WeakMap;var v_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new f_(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Rh(xh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Vb(n._delegate,r,new pf(e)))},t.tu=function(e,n,r){return new t(n,new Vb(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new S_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new S_(this.firestore,Bb(this._delegate,t))}catch(e){throw y_(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=ao(t))instanceof Vb&&Kb(this._delegate,t)},t.prototype.set=function(t,e){e=Rb("DocumentReference.set",e);try{return function(t,e,n){t=Lb(t,Vb);var r=Lb(t.firestore,Qb),i=Yw(t.converter,e,n);return i_(r,[lw(cw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Np.none())])}(this._delegate,t,e)}catch(n){throw y_(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?n_(this._delegate,t):n_.apply(void 0,Wi([this._delegate,t,e],n))}catch(i){throw y_(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return i_(Lb((t=this._delegate).firestore,Qb),[new Hp(t._key,Np.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=m_(e),i=b_(e,(function(e){return new w_(t.firestore,new Ow(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return r_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lb(t,Vb);var e=Lb(t.firestore,Qb),n=$b(e),r=new e_(e);return function(t,e){var n=this,r=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var n;return Ki(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return zi(this,void 0,void 0,(function(){var r,i;return Ki(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=Vh(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Rh(xh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=sm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,db(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Ow(e,r,t._key,n,new Dw(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Lb(t,Vb);var e=Lb(t.firestore,Qb);return mb($b(e),t._key,{source:"server"}).then((function(n){return o_(e,t,n)}))}(this._delegate):function(t){t=Lb(t,Vb);var e=Lb(t.firestore,Qb);return mb($b(e),t._key).then((function(n){return o_(e,t,n)}))}(this._delegate)).then((function(t){return new w_(e.firestore,new Ow(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(g_.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function y_(t,e,n){return t.message=t.message.replace(e,n),t}function m_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Wb(r))return r}return{}}function b_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Wb(t[0])?t[0]:Wb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var w_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new v_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Mw(this._delegate,t._delegate)},t}(),__=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qi(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(w_),E_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new f_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,jw(this._delegate,(o=r,s=i=n,a=Nw("where",e),new qw(a,s,o))))}catch(i){throw y_(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,jw(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Nw("orderBy",t);return new Bw(r,n)}(e,n)))}catch(r){throw y_(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,jw(this._delegate,(Fb("limit",n=e),new zw("limit",n,"F"))))}catch(r){throw y_(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,jw(this._delegate,(Fb("limitToLast",n=e),new zw("limitToLast",n,"L"))))}catch(r){throw y_(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jw(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kw("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw y_(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jw(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kw("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw y_(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jw(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gw("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw y_(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,jw(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gw("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw y_(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Gb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lb(t,jb);var e=Lb(t.firestore,Qb),n=$b(e),r=new e_(e);return function(t,e){var n=this,r=new _g;return t.asyncQueue.enqueueAndForget((function(){return zi(n,void 0,void 0,(function(){var n;return Ki(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return zi(this,void 0,void 0,(function(){var r,i,o,s,a;return Ki(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Qv(t,e,!0)];case 1:return a=u.sent(),r=new wm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=sm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,db(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Lw(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Lb(t,jb);var e=Lb(t.firestore,Qb),n=$b(e),r=new e_(e);return bb(n,t._query,{source:"server"}).then((function(n){return new Lw(e,r,t,n)}))}(this._delegate):function(t){t=Lb(t,jb);var e=Lb(t.firestore,Qb),n=$b(e),r=new e_(e);return Uw(t._query),bb(n,t._query).then((function(n){return new Lw(e,r,t,n)}))}(this._delegate)).then((function(t){return new I_(e.firestore,new Lw(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=m_(e),i=b_(e,(function(e){return new I_(t.firestore,new Lw(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return r_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(g_.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),T_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new __(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),I_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new E_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new __(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new T_(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new __(n._firestore,r))}))},t.prototype.isEqual=function(t){return Mw(this._delegate,t._delegate)},t}(),S_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return qi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new v_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new v_(this.firestore,void 0===t?zb(this._delegate):zb(this._delegate,t))}catch(e){throw y_(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=Lb(e.firestore,Qb),i=zb(e),o=Yw(e.converter,n),i_(r,[lw(cw(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Np.exists(!1))]).then((function(){return i}))).then((function(t){return new v_(s.firestore,t)}))},e.prototype.isEqual=function(t){return Kb(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(g_.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(E_);function A_(t){return Lb(t,Vb)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C_,k_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Zb.bind.apply(Zb,Wi([void 0],t)))}return t.documentId=function(){return new t(Zh.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=ao(t))instanceof Zb&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),x_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new pw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new hw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dw("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gw("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new vw("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),R_={Firestore:h_,GeoPoint:nw,Timestamp:Gh,Blob:c_,Transaction:p_,WriteBatch:d_,DocumentReference:v_,DocumentSnapshot:w_,Query:E_,QueryDocumentSnapshot:__,QuerySnapshot:I_,CollectionReference:S_,FieldPath:k_,FieldValue:x_,setLogLevel:function(t){var e;e=t,Nh.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(C_=Mo).INTERNAL.registerComponent(new uo("firestore",(function(t){return function(t,e){return new h_(t,new Qb(t,e),new l_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},R_))),C_.registerVersion("@firebase/firestore","2.3.8");
/*!
  * vue-router v4.0.10
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const N_="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,D_=t=>N_?Symbol(t):"_vr_"+t,O_=D_("rvlm"),P_=D_("rvd"),L_=D_("r"),F_=D_("rl"),M_=D_("rvl"),U_="undefined"!=typeof window;const V_=Object.assign;function j_(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}let q_=()=>{};const B_=/\/$/;function z_(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function K_(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function G_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function H_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!W_(t[n],e[n]))return!1;return!0}function W_(t,e){return Array.isArray(t)?Q_(t,e):Array.isArray(e)?Q_(e,t):t===e}function Q_(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var $_,X_,Y_,J_;function Z_(t){if(!t)if(U_){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(B_,"")}(X_=$_||($_={})).pop="pop",X_.push="push",(J_=Y_||(Y_={})).back="back",J_.forward="forward",J_.unknown="";const tE=/^[^#]+#/;function eE(t,e){return t.replace(tE,"#")+e}const nE=()=>({left:window.pageXOffset,top:window.pageYOffset});function rE(t){let e;if("el"in t){let n=t.el;const r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function iE(t,e){return(history.state?history.state.position-e:-1)+t}const oE=new Map;function sE(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),K_(n,"")}return K_(n,t)+r+i}function aE(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?nE():null}}function uE(t){const{history:e,location:n}=window;let r={value:sE(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=V_({},i.value,e.state,{forward:t,scroll:nE()});o(s.current,s,!0),o(t,V_({},aE(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,V_({},e.state,aE(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function cE(t){const e=uE(t=Z_(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=sE(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:l,type:$_.pop,direction:l?l>0?Y_.forward:Y_.back:Y_.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(V_({},t.state,{scroll:nE()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=V_({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:eE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function lE(t){return"string"==typeof t||"symbol"==typeof t}const hE={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},fE=D_("nf");var pE,dE;function gE(t,e){return V_(new Error,{type:t,[fE]:!0},e)}function vE(t,e){return t instanceof Error&&fE in t&&(null==e||!!(t.type&e))}(dE=pE||(pE={}))[dE.aborted=4]="aborted",dE[dE.cancelled=8]="cancelled",dE[dE.duplicated=16]="duplicated";const yE={sensitive:!1,strict:!1,start:!0,end:!0},mE=/[.+*?^${}()[\]/\\]/g;function bE(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function wE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=bE(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const _E={type:0,value:""},EE=/[a-zA-Z0-9_]/;function TE(t,e,n){const r=function(t,e){const n=V_({},yE,e);let r=[],i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(mE,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const h=l||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=c&&u.length<2?`(?:/${f})`:"/"+f),c&&(f+="?"),i+=f,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[_E]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:EE.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}(t.path),n),i=V_(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function IE(t,e){const n=[],r=new Map;function i(t,n,r){let a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:SE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=kE(e,t),l=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(V_({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let h,f;for(const e of l){let{path:l}=e;if(n&&"/"!==l[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=TE(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!AE(h)&&o(t.name)),"children"in u){let t=u.children;for(let e=0;e<t.length;e++)i(t[e],h,r&&r.children[e])}r=r||h,s(h)}return f?()=>{o(f)}:q_}function o(t){if(lE(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&wE(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!AE(t)&&r.set(t.record.name,t)}return e=kE({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw gE(1,{location:t});s=i.record.name,a=V_(function(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw gE(1,{location:t,currentLocation:e});s=i.record.name,a=V_({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:CE(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function SE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function AE(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function CE(t){return t.reduce(((t,e)=>V_(t,e.meta)),{})}function kE(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const xE=/#/g,RE=/&/g,NE=/\//g,DE=/=/g,OE=/\?/g,PE=/\+/g,LE=/%5B/g,FE=/%5D/g,ME=/%5E/g,UE=/%60/g,VE=/%7B/g,jE=/%7C/g,qE=/%7D/g,BE=/%20/g;function zE(t){return encodeURI(""+t).replace(jE,"|").replace(LE,"[").replace(FE,"]")}function KE(t){return zE(t).replace(PE,"%2B").replace(BE,"+").replace(xE,"%23").replace(RE,"%26").replace(UE,"`").replace(VE,"{").replace(qE,"}").replace(ME,"^")}function GE(t){return function(t){return zE(t).replace(xE,"%23").replace(OE,"%3F")}(t).replace(NE,"%2F")}function HE(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function WE(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(PE," ");let i=t.indexOf("="),o=HE(i<0?t:t.slice(0,i)),s=i<0?null:HE(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function QE(t){let e="";for(let n in t){const r=t[n];if(n=KE(n).replace(DE,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&KE(t))):[r&&KE(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function $E(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function XE(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function YE(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(gE(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(gE(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>a(t)))}))}function JE(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(YE(o,n,r,s,t))}else{let o=a();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||N_&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=(o.__vccOpts||o)[e];return u&&YE(u,n,r,s,t)()}))))}}var o;return i}function ZE(t){const e=Ge(L_),n=Ge(F_),r=Xr((()=>e.resolve(oe(t.to)))),i=Xr((()=>{let{matched:t}=r.value,{length:e}=t;const i=t[e-1];let o=n.matched;if(!i||!o.length)return-1;let s=o.findIndex(G_.bind(null,i));if(s>-1)return s;let a=eT(t[e-2]);return e>1&&eT(i)===a&&o[o.length-1].path!==a?o.findIndex(G_.bind(null,t[e-2])):s})),o=Xr((()=>i.value>-1&&function(t,e){for(let n in e){let r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=Xr((()=>i.value>-1&&i.value===n.matched.length-1&&H_(n.params,r.value.params)));return{route:r,href:Xr((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[oe(t.replace)?"replace":"push"](oe(t.to)).catch(q_):Promise.resolve()}}}const tT=cn({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ZE,setup(t,{slots:e}){const n=Ht(ZE(t)),{options:r}=Ge(L_),i=Xr((()=>({[nT(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[nT(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:Yr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function eT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const nT=(t,e,n)=>null!=t?t:null!=e?e:n;function rT(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const iT=cn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Ge(M_),i=Xr((()=>t.route||r.value)),o=Ge(P_,0),s=Xr((()=>i.value.matched[o]));Ke(P_,o+1),Ke(O_,s),Ke(M_,i);const a=ne();return Qe((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&G_(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return rT(n.default,{Component:u,route:r});const l=o.props[t.name],h=l?!0===l?r.params:"function"==typeof l?l(r):l:null,f=Yr(u,V_({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return rT(n.default,{Component:f,route:r})||f}}});function oT(t){const e=IE(t.routes,t);let n=t.parseQuery||WE,r=t.stringifyQuery||QE,i=t.history;const o=XE(),s=XE(),a=XE(),u=ie(hE,!0);let c=hE;U_&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=j_.bind(null,(t=>""+t)),h=j_.bind(null,GE),f=j_.bind(null,HE);function p(t,o){if(o=V_({},o||u.value),"string"==typeof t){let r=z_(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return V_(r,s,{params:f(s.params),hash:HE(r.hash),redirectedFrom:void 0,href:a})}let s;"path"in t?s=V_({},t,{path:z_(n,t.path,o.path).path}):(s=V_({},t,{params:h(t.params)}),o.params=h(o.params));let a=e.resolve(s,o);const c=t.hash||"";a.params=l(f(a.params));const p=function(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,V_({},t,{hash:(d=c,zE(d).replace(VE,"{").replace(qE,"}").replace(ME,"^")),path:a.path}));var d;let g=i.createHref(p);return V_({fullPath:p,hash:c,query:r===QE?$E(t.query):t.query},a,{redirectedFrom:void 0,href:g})}function d(t){return"string"==typeof t?z_(n,t,u.value.path):V_({},t)}function g(t,e){if(c!==t)return gE(8,{from:e,to:t})}function v(t){return m(t)}function y(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=d(r):{path:r},r.params={}),V_({query:t.query,hash:t.hash,params:t.params},r)}}function m(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,l=y(n);if(l)return m(V_(d(l),{state:o,force:s,replace:a}),e||n);const h=n;let f;return h.redirectedFrom=e,!s&&function(t,e,n){let r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&G_(e.matched[r],n.matched[i])&&H_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=gE(16,{to:h,from:i}),R(i,i,!0,!1)),(f?Promise.resolve(f):w(h,i)).catch((t=>vE(t)?t:k(t,h,i))).then((t=>{if(t){if(vE(t,2))return m(V_(d(t.to),{state:o,force:s,replace:a}),e||h)}else t=E(h,i,!0,a,o);return _(h,i,t),t}))}function b(t,e){const n=g(t,e);return n?Promise.reject(n):Promise.resolve()}function w(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>G_(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>G_(t,a)))||i.push(a))}return[n,r,i]}(t,e);n=JE(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(YE(r,t,e))}));const u=b.bind(null,t,e);return n.push(u),sT(n).then((()=>{n=[];for(const r of o.list())n.push(YE(r,t,e));return n.push(u),sT(n)})).then((()=>{n=JE(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(YE(r,t,e))}));return n.push(u),sT(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(YE(i,t,e));else n.push(YE(r.beforeEnter,t,e));return n.push(u),sT(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=JE(a,"beforeRouteEnter",t,e),n.push(u),sT(n)))).then((()=>{n=[];for(const r of s.list())n.push(YE(r,t,e));return n.push(u),sT(n)})).catch((t=>vE(t,8)?t:Promise.reject(t)))}function _(t,e,n){for(const r of a.list())r(t,e,n)}function E(t,e,n,r,o){const s=g(t,e);if(s)return s;const a=e===hE,c=U_?history.state:{};n&&(r||a?i.replace(t.fullPath,V_({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,R(t,e,n,a),x()}let T;function I(){T=i.listen(((t,e,n)=>{let r=p(t);const o=y(r);if(o)return void m(V_(o,{replace:!0}),r).catch(q_);c=r;const s=u.value;var a,l;U_&&(a=iE(s.fullPath,n.delta),l=nE(),oE.set(a,l)),w(r,s).catch((t=>vE(t,12)?t:vE(t,2)?(m(t.to,r).then((t=>{vE(t,20)&&!n.delta&&n.type===$_.pop&&i.go(-1,!1)})).catch(q_),Promise.reject()):(n.delta&&i.go(-n.delta,!1),k(t,r,s)))).then((t=>{(t=t||E(r,s,!1))&&(n.delta?i.go(-n.delta,!1):n.type===$_.pop&&vE(t,20)&&i.go(-1,!1)),_(r,s,t)})).catch(q_)}))}let S,A=XE(),C=XE();function k(t,e,n){x(t);const r=C.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function x(t){S||(S=!0,I(),A.list().forEach((([e,n])=>t?n(t):e())),A.reset())}function R(e,n,r,i){const{scrollBehavior:o}=t;if(!U_||!o)return Promise.resolve();let s=!r&&function(t){const e=oE.get(t);return oE.delete(t),e}(iE(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Se().then((()=>o(e,n,s))).then((t=>t&&rE(t))).catch((t=>k(t,e,n)))}const N=t=>i.go(t);let D;const O=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return lE(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){let n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:v,replace:function(t){return v(V_(d(t),{replace:!0}))},go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:C.add,isReady:function(){return S&&u.value!==hE?Promise.resolve():new Promise(((t,e)=>{A.add([t,e])}))},install(t){t.component("RouterLink",tT),t.component("RouterView",iT),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>oe(u)}),U_&&!D&&u.value===hE&&(D=!0,v(i.location).catch((t=>{})));const e={};for(let r in hE)e[r]=Xr((()=>u.value[r]));t.provide(L_,this),t.provide(F_,Ht(e)),t.provide(M_,u);let n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(T(),u.value=hE,D=!1,S=!1),n()}}}}function sT(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}export{hr as F,Oi as T,Ve as a,Or as b,wr as c,Ar as d,xr as e,Mo as f,ur as g,gi as h,oT as i,cE as j,Vi as k,yr as o,ne as r,u as t,He as w};
