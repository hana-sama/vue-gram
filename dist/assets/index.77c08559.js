var e=Object.defineProperty,l=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(l,r,n)=>r in l?e(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n;import{f as s,r as i,w as c,o as u,c as d,a as p,T as m,F as g,b as f,d as v,t as h,e as y,g as b,h as k,i as C,j as I,k as U}from"./vendor.fb926203.js";s.initializeApp({apiKey:"AIzaSyAsatDhggpqT09n5wxWhqn7X_i9MI0mMwY",authDomain:"vuegram-80e09.firebaseapp.com",projectId:"vuegram-80e09",storageBucket:"vuegram-80e09.appspot.com",messagingSenderId:"689439512622",appId:"1:689439512622:web:b1faa3a5588b55a9f7e7bf"});const w=s.storage(),j=s.firestore(),O=s.firestore.FieldValue.serverTimestamp,S=e=>{const s=i(null),u=i(null),d=j.collection(e).orderBy("createdAt","desc").onSnapshot((e=>{let i=[];e.docs.forEach((e=>{var s,c;i.push((s=((e,l)=>{for(var r in l||(l={}))t.call(l,r)&&o(e,r,l[r]);if(n)for(var r of n(l))a.call(l,r)&&o(e,r,l[r]);return e})({},e.data()),c={id:e.id},l(s,r(c))))})),s.value=i,u.value=null,console.log(s.value)}),(e=>{console.log(e.message),s.value=null,u.value="could not fetch the data"}));return c((e=>{e((()=>d()))})),{documents:s,error:u}};const A={setup(e,l){const{documents:r}=S("images");return{documents:r,handleClick:e=>{l.emit("selected",e)}}}};A.render=function(e,l,r,n,t,a){return u(),d(m,{tag:"div",name:"grid",appear:"",class:"img-grid"},{default:p((()=>[(u(!0),d(g,null,f(n.documents,(e=>(u(),d("div",{key:e.id,class:"img-wrap",onClick:l=>n.handleClick(e.url)},[v("img",{src:e.url,alt:""},null,8,["src"])],8,["onClick"])))),128))])),_:1})};const P={},T={class:"title"},B=v("h1",null,"VueGram",-1),E=v("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Amet, corrupti.",-1);P.render=function(e,l,r,n,t,a){return u(),d("div",T,[B,E])};const D={props:["file"],setup(e,l){const{progress:r}=(e=>{const l=i(null),r=i(null),n=i(null);return c((()=>{const t=w.ref("images/"+e.name),a=j.collection("images");t.put(e).on("state_change",(e=>{let l=e.bytesTransferred/e.totalBytes*100;n.value=l}),(e=>{l.value=e}),(async()=>{const e=await t.getDownloadURL(),l=O();await a.add({url:e,createdAt:l}),r.value=e}))})),{error:l,url:r,progress:n}})(e.file);return c((()=>{r.value>=100&&setTimeout((()=>l.emit("complete")),1e3)})),{progress:r}}};D.render=function(e,l,r,n,t,a){return u(),d("div",{class:"progress-bar",style:{width:n.progress+"%"}},null,4)};const F={components:{ProgressBar:D},setup(){const e=i(null),l=i(null),r=["image/png","image/jpeg"];return{file:e,fileError:l,handleChange:n=>{let t=n.target.files[0];console.log(t),t&&r.includes(t.type)?(e.value=t,l.value=null):(e.value=null,l.value="Please select an image file (png or jpg)")}}}},M=v("span",null,"Upload Image",-1),_={class:"output"},G={key:0,class:"error"},q={key:1};F.render=function(e,l,r,n,t,a){const o=b("ProgressBar");return u(),d("form",null,[v("label",null,[v("input",{type:"file",onChange:l[1]||(l[1]=(...e)=>n.handleChange&&n.handleChange(...e))},null,32),M]),v("div",_,[n.fileError?(u(),d("div",G,h(n.fileError),1)):y("",!0),n.file?(u(),d("div",q,h(n.file.name),1)):y("",!0),n.file?(u(),d(o,{key:2,file:n.file,onComplete:l[2]||(l[2]=e=>n.file=null)},null,8,["file"])):y("",!0)])])};const z={props:["imgUrl"],setup:(e,l)=>({handleClick:()=>{l.emit("close",null)}})};z.render=function(e,l,r,n,t,a){return u(),d("div",{class:"backdrop",onClick:l[1]||(l[1]=(...e)=>n.handleClick&&n.handleClick(...e))},[v(k,{name:"image",appear:""},{default:p((()=>[v("img",{src:r.imgUrl},null,8,["src"])])),_:1})])};const L={name:"App",components:{ImageGrid:A,Title:P,UploadForm:F,Modal:z},setup(){const e=i(null);return{selectedImgUrl:e,updateSelectedImgUrl:l=>{e.value=l,console.log(e)}}}},V={class:"App"};L.render=function(e,l,r,n,t,a){const o=b("Title"),s=b("UploadForm"),i=b("ImageGrid"),c=b("Modal");return u(),d("div",V,[v(o),v(s),v(i,{onSelected:n.updateSelectedImgUrl},null,8,["onSelected"]),n.selectedImgUrl?(u(),d(c,{key:0,imgUrl:n.selectedImgUrl,onClose:n.updateSelectedImgUrl},null,8,["imgUrl","onClose"])):y("",!0)])};const W={},x={class:"home"};W.render=function(e,l,r,n,t,a){return u(),d("div",x," Weclome Ninjas! ")};const H=[{path:"/",name:"Home",component:W}],K=C({history:I(),routes:H});U(L).use(K).mount("#app");
